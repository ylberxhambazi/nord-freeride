((c,t,s,r)=>{'use strict';const e=async()=>{const t=(await c.importJs(c.url+'js/admin/panel')).ThemifyPanel,e=s.tfId('tb_panel'),a=e.firstElementChild,o=s.createDocumentFragment(),n=s.tfId('tf_svg').cloneNode(!0),i=(o.appendChild(n),a&&(e.attachShadow({mode:a.getAttribute('shadowroot')}).appendChild(a.content),a.remove()),e.shadowRoot.prepend(o),new t(e.shadowRoot.querySelector('.container'),r.nonce,r.data,r.options,r.labels));c.importJs(c.url+'js/admin/notification'),i.el.querySelector('#main').tfOn('submit',async t=>{t.preventDefault(),t.stopPropagation();const e=Array.from(new FormData(t.currentTarget)),a={},o=(await c.importJs(c.url+'js/admin/notification')).Notification;for(let t=e.length-1;-1<t;--t)''!==e[t][1]&&'default'!==e[t][1]&&(a[e[t][0]]=e[t][1]);const n={action:'themify_builder_settings_save',nonce:r.nonce,data:JSON.stringify(a)};try{await o.show('info','Saving');const i=await c.fetch(n);if(!i.success)throw i}catch(t){try{n.data=new Blob([n.data],{type:'application/json'});const s=await c.fetch(n);if(!s.success)throw s}catch(t){throw t}}await o.showHide('done')})};!0===window.loaded?e():window.tfOn('pageshow',e,{once:!0,passive:!0})})(Themify,0,document,tb_settings);