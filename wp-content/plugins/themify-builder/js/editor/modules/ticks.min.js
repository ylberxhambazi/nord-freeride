((i,a,l,r)=>{'use strict';let d,c,h,f;const u=(e,t)=>{if(window.navigator.onLine){const o={action:'tb_update_tick'};return e&&(o.take=1),t&&(o.count=1),d=new AbortController,i.LocalFetch(o,'html',{signal:d.signal}).then(e=>{if(e){if(d.abort(),clearInterval(h),'cancel'!==e.textContent){if(!c){r.document.body.appendChild(e);const t=r.document.tfId('tmpl-tb_locked'),o=l.createElement('div'),n=i.ToolBar.el.getRootNode(),s=n.querySelector('#tf_base');o.id='tb_locked_root',o.className='tf_abs_t tf_w tf_h tf_hide',o.attachShadow({mode:'open'}).appendChild(t.content),o.shadowRoot.prepend(s.cloneNode(!0)),c=o.shadowRoot.tfId('tb_builder_restriction'),t.replaceWith(o),c.tfOn(a.click,t=>{const e=t.target?t.target.closest('.take,.rvs,.tf_close'):null;if(e){t.stopPropagation();const o=t.currentTarget.getRootNode().host,n=()=>{i.ToolBar.preventBeforeMsg=!0,'visual'===i.mode?r.location.reload():r.location.href=c.querySelector('.buttons a.btn').href};if(e.classList.contains('tf_close')){const s=!(o.style.zIndex=9999)===i.Builder.get().isSaved&&i.undoManager.hasUndo()?i.LiteLightBox.confirm({msg:themifyBuilder.i18n.builderClose,buttons:{no:themifyBuilder.i18n.label.save_no,yes:themifyBuilder.i18n.saveRevisionClose}}):Promise.resolve('no');s.then(e=>{o.style.zIndex='','yes'===e?a.triggerEvent(c.tfClass('rvs')[0],t.type):'no'===e&&n()})}else e.classList.contains('rvs')?(!0!==f&&i.Spinner.showLoader(),o.style.zIndex=9999,i.ToolBar.initRevision({target:i.ToolBar.el.tfClass('save_revision')[0]}).then(n).catch(e=>{o.style.zIndex=''}).finally(()=>{f=!0})):(o.classList.add('tf_hide'),u(!0).then(_).catch(e=>{u(!0).then(_)}))}},{passive:!0})}c.getRootNode().host.classList.remove('tf_hide')}return!1}})}},_=()=>{h=setInterval(u,1e3*parseInt(themifyBuilder.ticks))};a.on('themify_builder_ready',()=>{setTimeout(()=>{u(!1,!0).then(e=>{!1!==e&&_()})},1500)},!0,i.is_builder_ready)})(tb_app,Themify,document,window.top);