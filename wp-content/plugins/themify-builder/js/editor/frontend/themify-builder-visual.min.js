'use strict';(function(F,q,B,H,t,k,R){function da(a){function b(d){let e="";for(let f in d)e+=d[f];t.body.insertAdjacentHTML("beforeend",e);a&&a()}if(k.Forms.LayoutPart.init)a&&a();else{var c=function(){if(themifyBuilder.debug)return!1;try{let d=localStorage.getItem("tb_visual_templates"),e=themify_vars.version;if(!d)return!1;d=JSON.parse(d);for(let f in themifyBuilder.modules)e+=f;themifyBuilder.cache_data&&(e+=themifyBuilder.cache_data);return d.h!==q.hash(e)?!1:d.val}catch(d){return!1}}();c?b(c):
F.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_visual_templates",tb_load_nonce:themifyBuilder.tb_load_nonce},success(d){if(d){b(d);try{let e=themify_vars.version;for(let g in themifyBuilder.modules)e+=g;themifyBuilder.cache_data&&(e+=themifyBuilder.cache_data);const f={val:d,h:q.hash(e)};localStorage.setItem("tb_visual_templates",JSON.stringify(f))}catch(e){}}}})}}function V(a,b){for(let c=a.length-1;-1<c;--c)if(b===a[c].selectorText.replace(/\s*>\s*/g,">").replace(/,\s/g,
","))return c;return!1}function T(a){if(void 0===X[a]){const b=a;if(-1!==a.indexOf("-")){const c=a.toLowerCase().split("-");a=c[0]+c[1].charAt(0).toUpperCase()+c[1].slice(1);void 0!==c[2]&&(a+=c[2].charAt(0).toUpperCase()+c[2].slice(1));void 0!==c[3]&&(a+=c[3].charAt(0).toUpperCase()+c[3].slice(1))}return X[b]=a}return X[a]}function ea(){const a=H.document.getElementsByClassName("tb_middle_bar"),b=k.Utils.getMouseEvents(),c=function(d){if("touchstart"===d.type||1===d.which){d.stopPropagation();let e=
d.clientX,f="tb_right_bar"===this.id?"right":"left",g=tbLocalScript.breakpoints,h=k.toolbar.$el.width(),l=k.iframe.css("transition","none").width(),n=H.document.getElementsByClassName("tb_vertical_change_tooltip")[0],p=H.document.getElementsByClassName("tb_vertical_bars")[0],m=t.createElement("div");m.className="tb_mousemove_cover";n&&n.parentNode.removeChild(n);n=t.createElement("div");n.className="tb_vertical_change_tooltip";this.appendChild(n);p.appendChild(m);p.className+=" tb_resizing_start";
k.iframe[0].classList.add("tb_resizing_start");const r=function(u){u.stopPropagation();u=u.clientX-e;u*=2;"left"===f&&(u=-u);let z=320>l+u?320:l+u;z<=g.mobile?u="mobile":z<=g.tablet[1]?u="tablet":z<=g.tablet_landscape[1]?u="tablet_landscape":(u="desktop",z>h-17&&(z=h));n.textContent=z+"px";k.iframe.css("width",z);k.activeBreakPoint!==u&&ThemifyConstructor.lightboxSwitch(u)};m.addEventListener(b.mouseup,function(u){u.stopPropagation();this.removeEventListener(b.mousemove,r,{passive:!0});this.parentNode.removeChild(this);
n.parentNode.removeChild(n);k.iframe.css("transition","");p.classList.remove("tb_resizing_start");k.iframe[0].classList.remove("tb_resizing_start");t.body.classList.remove("tb_start_animate","tb_start_change_mode");k.Utils._onResize(!0);m=p=n=l=g=f=e=h=null},{once:!0,passive:!0});m.addEventListener(b.mousemove,r,{passive:!0});t.body.classList.add("tb_start_animate","tb_start_change_mode")}};for(let d=a.length-1;-1<d;--d)a[d].addEventListener(b.mousedown,c,{passive:!0})}const Y=[],Z=[],X={},aa={};
k.mode="visual";k.iframe="";k.id="";k.is_ajax_call=!1;k.Mixins.Frontend={render_visual(a){const b={},c=q.convert(this.el.querySelectorAll("[data-cid]"));c.unshift(this.el);for(let d=0,e=c.length;d<e;++d){let f=k.Models.Registry.lookup(c[d].getAttribute("data-cid"));f&&(b[f.cid]=f.toJSON())}k.bootstrap(b,a)},change_callback(){const a=this.$el;a[0].insertAdjacentHTML("afterbegin",'<span class="tf_lazy tb_preview_component"></span>');this.render_visual(function(){a.find(".tb_preview_component").remove();
k.Utils.setCompactMode(a[0].getElementsByClassName("module_column"));const b="row"===k.eventName?a.data("cid"):k.beforeEvent.data("cid");k.undoManager.push(b,k.beforeEvent,a,k.eventName);k.Utils.runJs(a,null,!0)})},createEl(a){var b=this.model.get("elType"),c=t.createElement("div");c.innerHTML=a;c=c.getElementsByClassName("module_"+b)[0];var d=c.classList,e=c.attributes;a="subrow"===b?this.el.getElementsByClassName("module_subrow")[0]:this.el;for(var f="subrow"===b?F(a):this.$el,g=d.length-1;-1<g;--g)a.classList.add(d[g]);
for(g=e.length-1;-1<g;--g)d=e[g].name,"class"!==d&&(a.setAttribute(d,e[g].value),0===d.indexOf("data-")&&f.data(d.replace("data-",""),e[g].value));f=c.getElementsByClassName("builder_row_cover")[0];g=c.getElementsByClassName("tbp_dc_styles")[0];e=c.getElementsByClassName(b+"-slider")[0];d=c.getElementsByClassName("tb_row_frame_wrap")[0];if(void 0!==d&&d.parentNode===c){const h=a.getElementsByClassName("tb_row_frame_wrap")[0];void 0!==h?a.replaceChild(d,h):a.insertBefore(d,a.firstChild)}void 0!==g&&
g.parentNode===c&&(d=a.getElementsByClassName("tbp_dc_styles")[0],void 0!==d?a.replaceChild(g,d):a.appendChild(g));void 0!==f&&f.parentNode===c&&(g=a.getElementsByClassName("builder_row_cover")[0],void 0!==g?a.replaceChild(f,g):a.insertAdjacentElement("afterbegin",f));void 0!==e&&e.parentNode===c&&(b=a.getElementsByClassName(b+"-slider")[0],void 0!==b?a.replaceChild(e,b):a.insertAdjacentElement("afterbegin",e))},restoreHtml(a){var b=t.createElement("div");b.innerHTML=a;a=b.firstChild;k.ActionBar.clear();
k.ActionBar.clearClicked();k.ActionBar.clearSelected();for(let c=a.getElementsByClassName("tb_action_wrap"),d=c.length-1;-1<d;--d)for(;null!==c[d].firstChild;)c[d].removeChild(c[d].lastChild);for(let c=q.selectWithParent("[contenteditable]",a),d=c.length-1;-1<d;--d)c[d].setAttribute("contenteditable","false"),(b=c[d].closest(".tb_editor_on"))&&b.classList.remove("tb_editor_on","tb_editor_clicked");for(let c=q.selectWithParent("tb_element_clicked",a),d=c.length-1;-1<d;--d)c[d].classList.remove("tb_element_clicked");
for(let c=q.selectWithParent("[data-cid]",a),d=c.length-1;-1<d;--d)(b=k.Models.Registry.lookup(c[d].getAttribute("data-cid")))&&b.trigger("change:view",c[d]);k.liveStylingInstance.$liveStyledElmt[0].replaceWith(a);k.Utils.runJs(F(a),null,!0)}};k.previewVisibility=function(){const a=this.el,b=a.classList,c="row"===this.model.get("elType")?this.model.get("styling"):this.model.get("mod_settings");k.isPreview?("hide_all"===c.visibility_all?b.add("hide-all"):("hide"===c.visibility_desktop&&b.add("hide-desktop"),
"hide"===c.visibility_tablet&&b.add("hide-tablet"),"hide"===c.visibility_tablet_landscape&&b.add("hide-tablet_landscape"),"hide"===c.visibility_mobile&&b.add("hide-mobile")),_.isEmpty(c.custom_parallax_scroll_reverse)||(a.dataset.parallaxElementReverse=!0),_.isEmpty(c.custom_parallax_scroll_fade)||(a.dataset.parallaxFade=!0),_.isEmpty(c.custom_parallax_scroll_speed)||(a.dataset.parallaxElementSpeed=parseInt(c.custom_parallax_scroll_speed))):b.remove("hide-desktop","hide-tablet","hide-tablet_landscape",
"hide-mobile","hide-all")};Object.assign(k.Views.BaseElement.prototype,k.Mixins.Frontend);k.Views.register_row({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);k.vent.on("dom:preview",k.previewVisibility.bind(this))}});k.Views.register_subrow({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",
this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});k.Views.register_column({initialize(){this.listenTo(this.model,"create:element",this.createEl);this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml)}});k.Views.register_module({_jqueryXhr:!1,templateVisual(a){return wp.template("builder-"+this.model.get("mod_name")+"-content")(a)},initialize(){this.listenTo(this.model,"create:element",this.createEl);
this.listenTo(this.model,"visual:change",this.change_callback);this.listenTo(this.model,"custom:restorehtml",this.restoreHtml);this.listenTo(this.model,"custom:preview:live",this.previewLive);this.listenTo(this.model,"custom:preview:refresh",this.previewReload);k.vent.on("dom:preview",k.previewVisibility.bind(this))},createEl(a){var b=t.createElement("div");const c=t.createDocumentFragment(),d=t.createElement("div"),e=t.createElement("div"),f=t.createElement("div"),g=t.createElement("div"),h=this.model.get("mod_name");
b.innerHTML=a;a=b.getElementsByClassName("module")[0];b=b.querySelector("#tb_module_styles");if(void 0===a)return k.is_ajax_call||(k.Models.Registry.remove(this.model.cid),this.model.destroy()),!1;if(null!==b){b=JSON.parse(b.innerText);for(let l in b)!q.cssLazy[l]&&b[l].s&&(q.cssLazy[l]=!0,q.LoadCss(b[l].s,b[l].v))}for(;null!==this.el.firstChild;)this.el.firstChild.remove();g.className="tb_visibility_hint";g.appendChild(k.Utils.getIcon("ti-eye"));k.Utils.visibilityLabel(g,this.model);d.className=
"tb_data_mod_name";d.innerHTML=themifyBuilder.modules[h].name;e.className="tf_plus_icon tb_column_btn_plus tb_module_btn_plus tb_disable_sorting";f.className="tb_action_wrap tb_module_action";a.classList.add("module-"+h,"tb_"+this.model.get("element_id"));a.appendChild(d);c.appendChild(f);c.appendChild(a);c.appendChild(g);c.appendChild(e);this.el.appendChild(c);"image"===h&&!0===q.is_builder_loaded&&!1===k.id&&setTimeout(function(){k.Utils.calculateHeight()},500)},shortcodeToHTML(a){const b=[],c=
themifyBuilder.available_shortcodes;let d=!1;for(let e=0,f=c.length;e<f;++e)a=wp.shortcode.replace(c[e],a,function(g){g=wp.shortcode.string(g);let h=q.hash(g);void 0===Y[h]?(b.push(g),g='<span class="tmp'+h+'">[loading shortcode...]</span>'):g=Y[h];d=!0;return g});if(d&&0<b.length){const e=this;void 0!==e._shortcodeXhr&&4!==e._shortcodeXhr&&e._shortcodeXhr.abort();e._shortcodeXhr=F.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_render_element_shortcode",shortcode_data:JSON.stringify(b),
tb_load_nonce:themifyBuilder.tb_load_nonce},success(f){if(f.success){const g=f.data.shortcodes;if(f=f.data.styles)for(let h=0,l=f.length;h<l;++h)f[h].s&&q.LoadCss(f[h].s,f[h].v,null,f[h].m);for(let h=0,l=g.length;h<l;++h)f=q.hash(g[h].key),e.$el.find(".tmp"+f).replaceWith(g[h].html),Y[f]=g[h].html,q.is_builder_loaded&&k.Utils.runJs(e.$el,"module",!0)}}})}return{content:a,found:d}},previewLive(a,b,c,d,e){k.is_ajax_call=!1;this._jqueryXhr&&4!==this._jqueryXhr&&this._jqueryXhr.abort();let f=null!==k.activeModel&&
d,g,h=300;a.cid=c?c:k.activeModel.cid;if(!f||!0===b){g=this.templateVisual(a);if(k.is_ajax_call)return;!0===b&&(a=this.shortcodeToHTML(g),a.found&&(h=1E3,g=a.content,f=null))}q.trigger("tbDisableInline");if(f){c=d.length;if(void 0===c)d.innerHTML=e;else for(--c;-1<c;--c)d[c].innerHTML=e;k.Utils.calculateHeight()}else if(this.createEl(g),!0===q.is_builder_loaded)if(c)k.Utils.calculateHeight(),k.Utils.runJs(this.$el,"module");else{k.liveStylingInstance.$liveStyledElmt=this.$el;const l=this;this.timeout&&
clearTimeout(this.timeout);this.timeout=setTimeout(function(){k.Utils.runJs(l.$el,"module");k.Utils.calculateHeight()},h)}},previewReload(a,b,c){function d(g){e.createEl(g);k.liveStylingInstance.$liveStyledElmt=e.$el;k.Utils.runJs(e.$el,"module",!0);e.$el.find(".tb_preview_component").remove();k.Utils.calculateHeight()}if(b&&k.activeModel.cid&&c){a=b.length;if(void 0===a)b.innerHTML=c;else for(let g=0;g<a;++g)b[g].innerHTML=c;k.Utils.calculateHeight()}else{var e=this;this._jqueryXhr&&4!==this._jqueryXhr&&
this._jqueryXhr.abort();k.is_ajax_call=!0;q.trigger("tbDisableInline");b=this.model.get("mod_name");c=a.unsetKey;e.el.insertAdjacentHTML("afterbegin",'<span class="tb_preview_component tf_lazy"></span>');delete a.cid;delete a.unsetKey;delete a.element_id;a=k.Utils.clear(a);a["module_"+b+"_slug"]=1;a=JSON.stringify(a);var f=q.hash(a);if(void 0===Z[f]||c)return this._jqueryXhr=F.ajax({type:"POST",url:themifyBuilder.ajaxurl,data:{action:"tb_load_module_partial",tb_post_id:themifyBuilder.post_ID,tb_cid:this.model.cid,
element_id:this.model.get("element_id"),tb_module_slug:b,tb_module_data:a,tb_load_nonce:themifyBuilder.tb_load_nonce},success(g){Z[f]=g;d(g);k.is_ajax_call=e._jqueryXhr=!1},error(){e.$el.removeClass("tb_preview_loading")}}),this;d(Z[f])}}});k.bootstrap=function(a,b,c){const d=[];let e=!0;a||(e=!1,a=k.Models.Registry.items);for(let f in a){a=k.Models.Registry.items[f];let g=a.toJSON(),h=g.elType,l=g["module"===h?"mod_settings":"styling"];if(l&&0<Object.keys(l).length)!0===e&&k.liveStylingInstance.setCss([g],
"module"===h?g.mod_name:h);else if("module"!==h)continue;if("module"===h&&"tile"!==g.mod_name&&void 0===g.mod_settings.__dc__&&"ajax"!==themifyBuilder.modules[g.mod_name].type)a.trigger("custom:preview:live",g.mod_settings,"accordion"===g.mod_name||"box"===g.mod_name||"feature"===g.mod_name||"tab"===g.mod_name||"text"===g.mod_name||"plain-text"===g.mod_name||"pointers"===g.mod_name||"pro-image"===g.mod_name||"countdown"===g.mod_name||"button"===g.mod_name||"pro-slider"===g.mod_name||"timeline"===
g.mod_name,f);else{if("column"===h)delete g.modules;else if("row"===h||"module"===h||"subrow"===h){if("row"===h&&"tb-page-break"===l.custom_css_row)continue;delete g.cols}d.push({jobID:f,data:g})}}this.batch_rendering(d,0,360,b,c)};k.batch_rendering=function(a,b,c,d,e){if(b>=a.length)"function"===typeof d&&d.call(this),k.toolbar.pageBreakModule.countModules(),q.trigger("tb_css_visual_modules_load");else{const f=a.slice(b,b+c);this.render_element(f,e).done(function(){k.batch_rendering(a,b+=c,c,d)})}};
k.render_element=function(a,b){a={action:"tb_render_element",tmpGS:b?JSON.stringify(b):"",batch:JSON.stringify(a),tb_load_nonce:themifyBuilder.tb_load_nonce,tb_post_id:themifyBuilder.post_ID};return F.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:a,success(c){for(let d in c)"tb_module_styles"!==d&&"gs"!==d&&k.Models.Registry.lookup(d).trigger("create:element",c[d]);if(c.tb_module_styles){c=c.tb_module_styles;for(let d in c){let e=c[d].s;!q.cssLazy[d]&&e&&(q.cssLazy[d]=!0,aa[e]=
!0,q.LoadCss(e,c[d].v,null,null,function(){delete aa[e];0===Object.keys(aa).length&&q.trigger("tb_css_visual_modules_load")}))}}else q.trigger("tb_css_visual_modules_load")}})};k.render=function(){da(function(){var a=t.getElementsByClassName("themify_builder_content");const b=themifyBuilder.post_ID;let c=null;for(let d=a.length-1;-1<d;--d)a[d].getAttribute("data-postid")!=b?a[d].classList.add("not_editable_builder"):null===c&&(c=a[d],c.setAttribute("id","themify_builder_content-"+b),c.setAttribute("data-postid",
b),c.classList.remove("not_editable_builder"),c.classList.add("tb_active_builder"));a=B["builderdata_"+b]?B["builderdata_"+b].data:[];a=Array.isArray(a)&&0!==a.length?a.filter(function(d){return d&&0<Object.keys(d).length}):{};B["builderdata_"+b]=null;k.id=b;k.Instances.Builder[k.builderIndex]=new k.Views.Builder({el:c,collection:new k.Collections.Rows(a),type:k.mode});k.Instances.Builder[k.builderIndex].render();a=null;k.bootstrap(null,function(){ThemifyStyles.init(ThemifyConstructor.data,ThemifyConstructor.breakpointsReverse,
b);k.liveStylingInstance=new v;k.liveStylingInstance.setCss(k.Mixins.Builder.toJSON(k.Instances.Builder[0].el));setTimeout(ea,2E3);q.on("tb_css_visual_modules_load",function(){const d=H.document.getElementById("tf_svg"),e=t.getElementById("tf_svg");d.parentNode.replaceChild(e,d);k.toolbar.el.style.display="block";H.Themify.trigger("themify_builder_ready");H.jQuery("body").trigger("themify_builder_ready");k.Utils.runJs(null,null,!0);k.Instances.Builder[k.builderIndex].$el.triggerHandler("tb_init");
q.is_builder_loaded=!0;k.id=!1;setTimeout(function(){q.fontAwesome();k.EdgeDrag.init()},500)},!0)})})};q.body.one("builderiframeloaded.themify",function(a,b){q.w=B.innerWidth;q.h=B.innerHeight;k.iframe=F(b);setTimeout(function(){q.loadAnimateCss()},1);R.setToolbar();k.toolbar=new k.Views.Toolbar({el:"#tb_toolbar"});k.toolbar.render();k.GS.init();q.LoadAsync(tbLocalScript.builder_url+"/js/editor/themify-constructor.js",function(){B.wp.media=B.top.wp.media;B.MediaElementPlayer=B.top.MediaElementPlayer;
jQuery.fn.mediaelementplayer=B.top.jQuery(B.top.document).mediaelementplayer;B.wp.mediaelement=B.top.wp.mediaelement;B.tinyMCE=B.top.tinyMCE;B.tinyMCEPreInit=B.top.tinyMCEPreInit;B.tinymce=B.top.tinymce;B.switchEditors=B.top.switchEditors;B.wpApiSettings=B.top.wpApiSettings;ThemifyConstructor.getForms(k.render)},null,null,function(){return"undefined"!==typeof ThemifyConstructor});t.addEventListener("submit",function(c){c.preventDefault()});t.addEventListener("click",function(c){var d=c.target;d="A"===
d.tagName?d:d.closest("a");!d||"_blank"===d.target||"#"!==d.href&&d.href&&d.href.replace((new URL(d.href)).hash,"")===B.top.location.href.replace(location.hash,"")||c.preventDefault()})});const v=function(){this.$context=F("#tb_lightbox_parent",H.document);this.$liveStyledElmt=null;this.module_rules={};this.rulesCache={};this.currentStyleObj={}};v.prototype.init=function(a,b){let c;var d=k.activeModel.get("element_id");this.type=k.activeModel.get("elType");this.group="module"===this.type?k.activeModel.get("mod_name"):
this.type;!0===b&&null!==k.GS.previousModel?(d=k.Models.Registry.lookup(k.GS.previousModel),c=d.get("elType"),"module"===c&&(c=d.get("mod_name")),d=d.get("element_id")):c=this.group;this.prefix=ThemifyStyles.getBaseSelector(c,d);this.$liveStyledElmt=b?F(t.querySelector(this.prefix)):k.Instances.Builder[k.builderIndex].$el.find(".tb_element_cid_"+k.activeModel.cid).first();this.currentStyleObj={};this.tempData={};this.undoData={};this.undoData[k.activeBreakPoint]={};this.tempData[k.activeBreakPoint]=
{};void 0===this.rulesCache[k.activeBreakPoint]&&(this.rulesCache[k.activeBreakPoint]={});this.currentSheet=this.getSheet(k.activeBreakPoint,b);!0!==a&&("column"!==this.type&&"subrow"!==this.type&&this.bindAnimation(),this.bindTabsSwitch(),this.initModChange())};v.prototype.setCss=function(a,b,c){a=k.GS.createCss(a,b,void 0);b=[];for(let f in a)if("fonts"===f||"cf_fonts"===f)for(let g in a[f]){var d=g;0<a[f][g].length&&(d+=":"+a[f][g].join(","));b.push(d)}else if("gs"===f){d=a[f];for(let g in d){var e=
this.getSheet(g,!0);let h=e.cssRules?e.cssRules:e.rules;for(let l in d[g])!1===V(h,l)&&e.insertRule(l+"{"+d[g][l].join("")+";}",h.length)}}else if("bg"!==f){d=this.getSheet(f,c);e=d.cssRules?d.cssRules:d.rules;for(let g in a[f])!1===V(e,g)&&d.insertRule(g+"{"+a[f][g].join("")+";}",e.length)}ThemifyConstructor.font_select.loadGoogleFonts(b.join("|"));return a};v.prototype.setLiveStyle=function(a,b,c){c?"string"===typeof c&&(c=[c]):c=[""];c=ThemifyStyles.getNestedSelector(c);let d="";const e=this.currentSheet.cssRules?
this.currentSheet.cssRules:this.currentSheet.rules;for(let l=0,n=c.length;l<n;++l){var f="h"===this.styleTabId?c[l].endsWith(":after")||c[l].endsWith(":before"):!0;!1===f&&-1===c[l].indexOf(":hover")&&(c[l]+=":hover");d+=this.prefix+c[l];!1===f&&(d+=","+this.prefix+c[l].replace(":hover",".tb_visual_hover"));l!==n-1&&(d+=",")}if(!0===this.isChanged)if("h"===this.styleTabId){f=d.split(",");for(var g=f.length-1;-1<g;--g)if(-1===f[g].indexOf("tb_visual_hover")){c=t.querySelectorAll(f[g].split(":hover")[0]);
for(var h=c.length-1;-1<h;--h)c[h].classList.add("tb_visual_hover")}}else for(this.$liveStyledElmt[0].classList.remove("tb_visual_hover"),c=this.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover"),f=c.length-1;-1<f;--f)c[f].classList.remove("tb_visual_hover");d=d.replace(/\s{2,}/g," ").replace(/\s*>\s*/g,">").replace(/,\s/g,",");c=q.hash(d);f=b;g=a;h=void 0!==this.rulesCache[k.activeBreakPoint][c]?this.rulesCache[k.activeBreakPoint][c]:V(e,d);!1===b&&(b="");a=T(a);!1!==h&&e[h]?(void 0===
this.tempData[k.activeBreakPoint][h]&&(this.tempData[k.activeBreakPoint][h]={}),void 0===this.tempData[k.activeBreakPoint][h][a]&&(this.tempData[k.activeBreakPoint][h][a]=e[h].style[a]),e[h].style[a]=b):(h=e.length,this.currentSheet.insertRule(d+"{"+g+":"+b+";}",h),void 0===this.tempData[k.activeBreakPoint][h]&&(this.tempData[k.activeBreakPoint][h]={}),this.tempData[k.activeBreakPoint][h][a]="");this.rulesCache[k.activeBreakPoint][c]=h;void 0===this.undoData[k.activeBreakPoint][h]&&(this.undoData[k.activeBreakPoint][h]=
{});this.undoData[k.activeBreakPoint][h][a]={a:b,b:this.tempData[k.activeBreakPoint][h][a]};q.body.triggerHandler("tb_"+this.type+"_styling",[this.group,a,b,f,this.$liveStyledElmt]);"desktop"===k.activeBreakPoint||0!==a.indexOf("padding")&&0!==a.indexOf("margin")&&"height"!==a&&"width"!==a||k.Utils.calculateHeight()};v.prototype.initModChange=function(a){if(!0===a)q.body.off("themify_builder_change_mode.tb_visual_mode");else{var b=this;q.body.on("themify_builder_change_mode.tb_visual_mode",function(c,
d,e){b.setMode(e,null!==k.GS.activeGS)})}};v.prototype.setMode=function(a,b){void 0===this.tempData[a]&&(this.tempData[a]={});void 0===this.rulesCache[a]&&(this.rulesCache[a]={});void 0===this.undoData[a]&&(this.undoData[a]={});this.currentSheet=this.getSheet(a,b)};v.prototype.revertRules=function(a){for(let c in this.tempData){var b=this.getSheet(c,a);b=b.cssRules?b.cssRules:b.rules;for(let d in this.tempData[c])if(b[d])for(let e in this.tempData[c][d])b[d].style[e]=this.tempData[c][d][e]}this.undoData=
{};this.tempData={}};v.prototype.getSheet=function(a,b){return ThemifyStyles.getSheet(a,b)};v.prototype.reset=function(){this.rulesCache={};this.tempData={};this.undoData={};const a=ThemifyConstructor.breakpointsReverse;for(let c=a.length-1;-1<c;--c){let d=this.getSheet(a[c]);var b=d.cssRules;for(b=b.length-1;-1<b;--b)d.deleteRule(b);d=this.getSheet(a[c],!0);b=d.cssRules;for(b=b.length-1;-1<b;--b)d.deleteRule(b)}};v.prototype.clear=function(){var a=this.$liveStyledElmt[0];void 0!==a&&a.classList.remove("animated",
"hover-wow","tb_visual_hover");this.module_rules={};this.styleTab=this.styleTabId=this.currentField=this.isChanged=null;if(!k.saving&&k.hasChanged)this.revertRules(null!==k.GS.activeGS),this.type&&"module"!==this.type&&null===k.GS.activeGS&&(a=k.activeModel.get("styling"))&&"slider"===a.background_type&&a.background_slider&&this.bindBackgroundSlider();else{a=a.getElementsByClassName("tb_visual_hover");for(let b=a.length-1;-1<b;--b)a[b].classList.remove("tb_visual_hover")}this.bindAnimation(!0);this.bindTabsSwitch(!0);
this.initModChange(!0);this.undoData={};this.tempData={};this.$liveStyledElmt=this.currentStyleObj=this.currentSheet=null};v.prototype.addOrRemoveFrame=function(a,b){if("module"!==this.type){var c=this,d=this.$liveStyledElmt.hasClass("active_subrow")?this.$liveStyledElmt.find("> .module_subrow"):this.$liveStyledElmt,e="string"===typeof a;a=e?a:a.closest(".tb_tab").id.split("_").pop();var f=d.children(".tb_row_frame_wrap")[0];q.cssLazy.tf_frames||(q.cssLazy.tf_frames=!0,q.LoadCss(themifyBuilder.builder_url+
"/css/modules/frames.css"));f||(f=t.createElement("div"),f.className="tb_row_frame_wrap tf_overflow tf_abs",d.children(".tb_action_wrap").after(f));d=f.querySelector(".tb_row_frame_"+a);if(void 0===b){b={};var g=this.getValue(a+"-frame_type").selector;const l="custom location width height width_unit height_unit repeat type layout color sh_x sh_y sh_b sh_c".split(" ");for(let n=0,p=l.length;n<p;++n){var h=H.document.getElementById(a+"-frame_"+l[n]);if("type"===l[n])h=h.querySelector("input:checked").value;
else if("layout"===l[n])h=h.getElementsByClassName("selected")[0].id;else if("color"===l[n]||"sh_c"===l[n]){if(h=k.Utils.getColor(h),""===h)continue}else h=h.value;b[l[n]]=h}}if(b.type===a+"-presets"||b.type===a+"-custom"){if(b.type===a+"-presets"&&(!b.layout||"none"===b.layout)||b.type===a+"-custom"&&!b.custom){"desktop"===k.activeBreakPoint?e||this.setLiveStyle("background-image","",g):"none"===b.layout&&this.setLiveStyle("background-image","none",g);return}d?(d.classList.remove("behind_content",
"in_front"),void 0!==b.location&&d.classList.add(b.location)):(d=t.createElement("div"),d.className="tf_abs tf_overflow tb_row_frame tb_row_frame_"+a,d.className+="left"===a||"right"===a?" tf_h":" tf_w",void 0!==b.location&&(d.className+=" "+b.location),f.appendChild(d))}if(!e){if(b.type===a+"-presets"){e="left"===a||"right"===a?b.layout+"-l":b.layout;const l=q.hash(e),n=function(p){b.color&&(p=p.replace(/#D3D3D3/ig,b.color));c.setLiveStyle("background-image",'url("data:image/svg+xml;utf8,'+encodeURIComponent(p)+
'")',g)};void 0!==ThemifyStyles.fields.frameCache[l]?n(ThemifyStyles.fields.frameCache[l]):(f=t.getElementById("tmpl-frame_"+e),null!==f?(ThemifyStyles.fields.frameCache[l]=f.textContent.trim(),n(ThemifyStyles.fields.frameCache[l])):F.ajax({dataType:"text",url:tbLocalScript.builder_url+"/img/row-frame/"+e+".svg",success(p){ThemifyStyles.fields.frameCache[l]=p;n(p)}}))}else c.setLiveStyle("background-image",'url("'+b.custom+'")',g);c.setLiveStyle("width",b.width?b.width+b.width_unit:"",g);c.setLiveStyle("height",
b.height?b.height+b.height_unit:"",g);b.repeat?"left"===a||"right"===a?c.setLiveStyle("background-size","100% "+100/b.repeat+"%",g):c.setLiveStyle("background-size",100/b.repeat+"% 100%",g):c.setLiveStyle("background-size","",g);b.sh_b&&b.sh_c?c.setLiveStyle("filter","drop-shadow("+[b.sh_x?b.sh_x+"px":0,b.sh_y?b.sh_y+"px":0,b.sh_b+"px",b.sh_c].join(" ")+")",g):c.setLiveStyle("filter","",g)}}};v.prototype.overlayType=function(a){if("module"!==this.type){var b="color"===a||"hover_color"===a,c=b?"tfminicolors-input":
"themify-gradient-type";a=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0].getElementsByClassName(c)[0];b?((b=a.value)&&(b=k.Utils.getColor(a)),q.triggerEvent(a,"themify_builder_color_picker_change",{val:b})):q.triggerEvent(a,"change")}};v.prototype.addOrRemoveComponentOverlay=function(a,b,c){if("module"!==this.type){var d=this.getComponentBgOverlay(this.type),e=this.getValue(b),f=e.selector;d=0!==d.length;this.$liveStyledElmt[0].classList.toggle("tb_visual_hover","h"===this.styleTabId);
""===c&&b?(this.setLiveStyle("backgroundImage","",f),this.setLiveStyle("backgroundColor","",f)):(d||(d=t.createElement("div"),d.className="builder_row_cover tf_abs",this.$liveStyledElmt.find(".tb_action_wrap").first().before(d)),e&&("color"===a?this.setLiveStyle("backgroundImage","none",f):this.setLiveStyle("backgroundColor",!1,f),this.setLiveStyle(e.prop,c,f)))}};v.prototype.outline=function(a){const b=this.getValue(a.id);var c=a.closest(".tb_multi_fields");a=k.Utils.getColor(c.getElementsByClassName("outline_color")[0]);
const d=parseFloat(c.getElementsByClassName("outline_width")[0].value);c=c.getElementsByClassName("outline_style")[0].value;"none"===c?this.setLiveStyle("outline","none",b):isNaN(d)||""===d||""===a||this.setLiveStyle("outline",d+"px "+c+" "+a,b)};v.prototype.bindMultiFields=function(a,b){function c(p,m){if(!1===h&&!1===g){if("row"===d.type&&void 0!==tbLocalScript.fullwidth_support&&(l&&("padding"===m||"margin"===m)||"padding-left"===m||"padding-right"===m||"margin-left"===m||"margin-right"===m)){const r=
m.split("-"),u=k.activeBreakPoint+"-"+r[0];if(l)p=p+","+p;else{let z=d.$liveStyledElmt.data(u);z=z?z.split(","):[];"left"===r[1]?z[0]=p:z[1]=p;p=z.join(",")}d.$liveStyledElmt.attr("data-"+u,p).data(u,p);ThemifyBuilderModuleJs.loadOnAjax(d.$liveStyledElmt,d.type,!0)}(l&&"padding"===m||0===m.indexOf("padding"))&&setTimeout(function(){q.trigger("tfsmartresize")},600)}}const d=this;if(b=d.getValue(a.id)){var e=a.closest(".tb_seperate_items"),f=b.prop.split("-"),g=void 0!==f[3],h=!1===g&&"border"===f[0],
l=e.hasAttribute("data-checked");e=e.getElementsByClassName("tb_multi_field");var n=function(p){let m="";if(!0===h){var r=p.closest("li");p=parseFloat(r.getElementsByClassName("border_width")[0].value.trim());const u=r.getElementsByClassName("border_style")[0].value;r=k.Utils.getColor(r.getElementsByClassName("tfminicolors-input")[0]);"none"===u?m=u:isNaN(p)||""===p||""===r||(m=p+"px "+u+" "+r)}else m=p.value.trim(),""!==m&&(m=parseFloat(m),m=isNaN(m)?"":m+p.closest(".tb_input").querySelector("#"+
p.id+"_unit").value);return m};a=!0===l?n(a):null;f=f[0];for(let p=e.length-1;-1<p;--p)!1===l&&(a=n(e[p])),f=d.getValue(e[p].id).prop,d.setLiveStyle(f,a,b.selector),c(a,f);!1===h&&(k.ActionBar.hoverCid=null);e=null}};v.prototype.bindRowWidthHeight=function(a,b,c){c||(c=this.$liveStyledElmt);"row_height"===a?"fullheight"===b?c[0].classList.add(b):c[0].classList.remove("fullheight"):"fullwidth"===b?(c.removeClass("fullwidth").addClass("fullwidth_row_container"),ThemifyBuilderModuleJs.loadOnAjax(c,this.type,
!0)):"fullwidth-content"===b?(c.removeClass("fullwidth_row_container").addClass("fullwidth"),ThemifyBuilderModuleJs.loadOnAjax(c,this.type,!0)):c.removeClass("fullwidth fullwidth_row_container").css({"margin-left":"","margin-right":"","padding-left":"","padding-right":"",width:""});q.trigger("tfsmartresize")};v.prototype.bindAnimation=function(a){const b=this;if(!0===a)this.$context.off("change.tb_animation");else this.$context.on("change.tb_animation","#animation_effect,#animation_effect_delay,#animation_effect_repeat,#hover_animation_effect",
function(){var c="hover_animation_effect"===this.id,d=c?"hover_animation_effect":"animation_effect";const e=c?this.value:b.$context.find("#animation_effect").val();var f=void 0!==b.currentStyleObj[d]?b.currentStyleObj[d]:ThemifyConstructor.values[d];const g=b.$liveStyledElmt;f&&g.removeClass(f+" wow").css({"animation-name":"","animation-delay":"","animation-iteration-count":""});g.removeClass("animated tb_hover_animate");if(b.currentStyleObj[d]=e)d=c?"":parseFloat(b.$context.find("#animation_effect_delay").val()),
c=c?"":parseInt(b.$context.find("#animation_effect_repeat").val()),f=tbLocalScript.is_animation,g.css({"animation-delay":0<d&&!isNaN(d)?d+"s":"","animation-iteration-count":0<c&&!isNaN(c)?c:""}).addClass("wow").attr("data-tf-animation",e),tbLocalScript.is_animation=!0,ThemifyBuilderModuleJs.wowInit(g,null,!1),tbLocalScript.is_animation=f})};v.prototype.getRowAnchorClass=function(a){return 0<a.length?"tb_has_section tb_section-"+a:""};v.prototype.getStylingVal=function(a){return void 0!==this.currentStyleObj[a]?
this.currentStyleObj[a]:""};v.prototype.setStylingVal=function(a,b){this.currentStyleObj[a]=b};v.prototype.bindBackgroundMode=function(a,b){const c={repeat:"repeat","repeat-x":"repeat-x","repeat-y":"repeat-y","repeat-none":"no-repeat","no-repeat":"no-repeat",fullcover:"cover","best-fit-image":"contain","builder-parallax-scrolling":"cover","builder-zoom-scrolling":"100%","builder-zooming":"100%"},d=this.$liveStyledElmt[0];if(void 0!==c[a]){let e={};b=this.getValue(b);let f=H.document.getElementById(b.origId);
null!==f&&""===f.value.trim()?(a=null,e={"background-repeat":"","background-size":"","background-position":"","background-attachment":""}):-1!==a.indexOf("repeat")?(e["background-repeat"]=c[a],e["background-size"]="auto"):(e["background-size"]=c[a],e["background-repeat"]="no-repeat","best-fit-image"===c[a]||"builder-zooming"===c[a]?e["background-position"]="center center":"builder-zoom-scrolling"===c[a]&&(e["background-position"]="50%"));d.classList.remove("builder-parallax-scrolling","builder-zooming",
"builder-zoom-scrolling");d.style.backgroundSize=d.style.backgroundPosition="";if("module"!==this.type||"builder-parallax-scrolling"!==a&&"builder-zooming"!==a&&"builder-zoom-scrolling"!==a&&"best-fit-image"!==a){"builder-parallax-scrolling"===a?d.classList.add("builder-parallax-scrolling"):"builder-zooming"===a?d.classList.add("builder-zooming"):"builder-zoom-scrolling"===a&&d.classList.add("builder-zoom-scrolling");for(let g in e)this.setLiveStyle(g,e[g],b.selector);"builder-zoom-scrolling"!==a&&
"builder-zooming"!==a&&"builder-parallax-scrolling"!==a||ThemifyBuilderModuleJs.loadOnAjax(this.$liveStyledElmt,null,!0)}}};v.prototype.position=function(a,b){a&&0<a.length&&(b=this.getValue(b))&&(a=a.split(","),this.setLiveStyle(b.prop,a[0]+"% "+a[1]+"%",b.selector))};v.prototype.bindBackgroundSlider=function(a){if("module"!==this.type){var b=this;a=b.$context.find("#"+a.id).val().trim();b.removeBgSlider();if(a){void 0===this.cahce&&(this.cahce={});a={shortcode:encodeURIComponent(a),mode:b.$context.find("#background_slider_mode").val(),
speed:b.$context.find("#background_slider_speed").val(),size:b.$context.find("#background_slider_size").val()};const c=function(e){e=F(e);const f=b.getComponentBgOverlay(b.type);0<f.length?f.after(e):b.$liveStyledElmt.prepend(e);ThemifyBuilderModuleJs.loadOnAjax(e.parent(),b.type,!0)};let d="";for(let e in a)d+=q.hash(e+a[e]);void 0!==this.cahce[d]?c(this.cahce[d]):(a.type=b.type,F.post(themifyBuilder.ajaxurl,{nonce:themifyBuilder.tb_load_nonce,action:"tb_slider_live_styling",tb_background_slider_data:a},
function(e){10>e.length||(b.cahce[d]=e,c(e))}))}}};v.prototype.videoOptions=function(a,b){if("module"!==this.type){var c=this.$liveStyledElmt.find(".big-video-wrap").first();a=!0===a.checked;var d="";void 0!==c[0]&&(c[0].classList.contains("themify_ytb_wrapper")?(c=this.$liveStyledElmt,d="ytb"):c[0].classList.contains("themify-video-vmieo")?(c=$f(c.children("iframe")[0]))&&(d="vimeo"):(c=this.$liveStyledElmt.data("plugin_ThemifyBgVideo"),d="local"),"mute"===b?a?("ytb"===d?c.ThemifyYTBMute():"vimeo"===
d?c.api("setVolume",0):"local"===d&&c.muted(!0),this.$liveStyledElmt.data("mutevideo","mute")):("ytb"===d?c.ThemifyYTBUnmute():"vimeo"===d?c.api("setVolume",1):"local"===d&&c.muted(!1),this.$liveStyledElmt.data("mutevideo","")):"unloop"===b&&(a?("vimeo"===d?c.api("setLoop",0):"local"===d&&c.loop(!1),this.$liveStyledElmt.data("unloopvideo","")):("vimeo"===d?c.api("setLoop",1):"local"===d&&c.loop(!0),this.$liveStyledElmt.data("unloopvideo","loop"))))}};v.prototype.bindBackgroundTypeRadio=function(a){let b=
"tb_uploader_input";"module"!==this.type&&("slider"!==a?"n"===this.styleTabId&&this.removeBgSlider():b="tb_shortcode_input","video"!==a&&"n"===this.styleTabId&&this.removeBgVideo());"gradient"!==a?this.setLiveStyle("backgroundImage","none"):b="themify-gradient-type";const c=this.styleTab.getElementsByClassName("tb_group_element_"+a)[0];q.triggerEvent(c.getElementsByClassName(b)[0],"change");"image"===a&&"module"===this.type&&(b=c.getElementsByClassName("tfminicolors-input")[0])&&q.triggerEvent(b,
"themify_builder_color_picker_change",{val:b.value})};v.prototype.bindFontColorType=function(a,b,c){if("radio"===c)if(b=-1!==a.indexOf("_solid"),a=!0===b?a.replace(/_solid$/ig,""):a.replace(/_gradient$/ig,"-gradient-type"),a=H.document.getElementById(a),!0===b){b=k.Utils.getColor(a);if(void 0===b||""===b)b="";q.triggerEvent(a,"themify_builder_color_picker_change",{val:b})}else q.triggerEvent(a,"change");else b=this.getValue(b).selector,"color"===c?void 0===a||""===a?(a="",this.setLiveStyle("WebkitBackgroundClip",
"",b),this.setLiveStyle("backgroundClip","",b),this.setLiveStyle("backgroundImage","",b)):(this.setLiveStyle("WebkitBackgroundClip","border-box",b),this.setLiveStyle("backgroundClip","border-box",b),this.setLiveStyle("backgroundImage","none",b)):""!==a&&(c="backgroundImage",this.setLiveStyle("color","transparent",b),this.setLiveStyle("WebkitBackgroundClip","text",b),this.setLiveStyle("backgroundClip","text",b)),""===a&&"color"!==c||this.setLiveStyle(c,a,b)};v.prototype.shadow=function(a,b,c){if(b=
this.getValue(b)){a=a.closest(".tb_seperate_items").getElementsByClassName("tb_shadow_field");c="";let d=!0,e="";for(let f=0,g=a.length;f<g;++f)if(a[f].classList.contains("tb-checkbox"))c=a[f].checked?"inset ":"";else{let h=a[f].value.trim();"color"===ThemifyConstructor.styles[a[f].id].type?h=k.Utils.getColor(a[f]):""===h?h=0:(d=!1,h+=a[f].closest(".tb_input").querySelector("#"+a[f].id+"_unit").value);e+=h+" "}this.setLiveStyle(b.prop,!0===d?"":c+e,b.selector)}};v.prototype.filters=function(a,b){a=
a.closest(".tb_filters_fields").getElementsByClassName("tb_filters_field");let c="",d;for(let e=0,f=a.length;e<f;++e){let g=a[e].value.trim();""!==g&&(d=this.getValue(a[e].id),g+="hue-rotate"===d.prop?"deg":a[e].closest(".tb_seperate_items").querySelector("#"+a[e].id+"_unit").textContent,g=d.prop+"("+g+")",c+=g+" ")}d=this.getValue(b);this.setLiveStyle("filter",c,d.selector)};v.prototype.transform=function(a,b){let c="";a=a.closest(".tb_transform_fields");const d=this.getValue(b),e=["scale","translate",
"rotate","skew"];b=b.split("_")[0];for(let h=0,l=e.length;h<l;++h)switch(e[h]){case "scale":case "translate":case "skew":var f=a.querySelector("#"+b+"_"+e[h]+"_top").value.trim();const n=a.querySelector("#"+b+"_"+e[h]+"_bottom").value.trim();var g="translate"===e[h]?{x:a.querySelector("#"+b+"_"+e[h]+"_top_unit").value,y:a.querySelector("#"+b+"_"+e[h]+"_bottom_unit").value}:"skew"===e[h]?"deg":"";if(""!==f||""!==n)c=""!==f&&a.querySelector("#"+b+"_"+e[h]+"_opp_bottom .style_apply_oppositive").checked?
c+(e[h]+"("+f+("translate"===e[h]?g.x:g)+") "):""!==f&&""!==n?c+(e[h]+"("+f+("translate"===e[h]?g.x:g)+","+n+("translate"===e[h]?g.y:g)+") "):c+(""!==f?e[h]+"X("+f+("translate"===e[h]?g.x:g)+") ":e[h]+"Y("+n+("translate"===e[h]?g.y:g)+") ");break;case "rotate":g=["x","y","z"];for(let p in g)g.hasOwnProperty(p)&&(f=a.querySelector("#"+b+"_"+e[h]+"_"+g[p]).value.trim(),""!==f&&(c+=e[h]+g[p].toUpperCase()+"("+f+"deg) "))}this.setLiveStyle("transform",c.trim(),d.selector)};v.prototype.setData=function(a,
b,c){if(a=this.getValue(a))""===b&&(b=a.prop),this.setLiveStyle(b,c,a.selector)};v.prototype.bindEvents=function(a,b){if(!a.classList.contains("style_apply_all")){var c=this;(function(){let d,e=b.type,f=b.prop,g=b.id;d="color"===e?"themify_builder_color_picker_change":"gradient"===e?"themify_builder_gradient_change":"text"===e||"range"===e||"textarea"===e?"keyup":"change";a.addEventListener(d,function(h){var l=this.classList,n="SELECT"===this.tagName,p=!n&&"radio"===this.type;if(c.currentField!==
this.id||""===c.currentField){c.currentField="radio"===this.type?!1:this.id;c.isChanged=!0;c.styleTab=null;c.styleTabId="n";var m=this.closest(".tb_tab");null===m?(m=this.closest(".tb_expanded_opttions"),null===m&&(m=H.document.getElementById("tb_options_styling"))):c.styleTabId=m.id.split("_").pop();c.styleTab=m}else c.isChanged=!1;k.hasChanged=!0;h=h.detail&&h.detail.val?h.detail.val:"frame"===e?this.id:this.value;h=void 0!==h&&"undefined"!==h?h.trim():"";if(l.contains("outline_color")||l.contains("outline_width")||
l.contains("outline_style"))c.outline(this,b);else if(l.contains("tb_transform_field"))c.transform(this,g);else if("color"===e&&l.contains("border_color")||!0===n&&l.contains("border_style")||"keyup"===d&&(l.contains("border_width")||l.contains("tb_multi_field")))c.bindMultiFields(this);else if("frame-custom"===f||"frame"===e||l.contains("tb_frame"))"module"!==c.type&&c.addOrRemoveFrame(this);else if(l.contains("tb_shadow_field"))c.shadow(this,g);else if(l.contains("tb_filters_field"))c.filters(this,
g);else if("keyup"===d)""!==h&&("column-rule-width"===f?(h+="px",l=g.replace("_width","_style"),n=H.document.getElementById(l),null!==n&&c.setData(l,"",n.value)):"column-gap"===f?h+="px":(l=H.document.getElementById(g+"_unit"),null!==l&&(h+=l.value?l.value:"px"))),c.setData(g,"",h);else if(!0===b.isFontColor)c.bindFontColorType(h,g,e);else{if(!0===n)if("font-weight"===f)l=this.getAttribute("data-selected"),n=c.styleTab.getElementsByClassName("tb_multi_fonts")[0],null!==l&&""!==l&&"default"!==l&&void 0===
ThemifyConstructor.font_select.safe[l]&&ThemifyConstructor.font_select.loadGoogleFonts(l+":"+h),n&&("regular"===h?h="400":"italic"===h&&(h="400italic"),-1!==h.indexOf("italic")?(h=parseInt(h.replace("italic","")),l=n.querySelector('[data-value="italic"]')):l=n.querySelector('[data-value="normal"]'),l&&!1===l.checked&&l.parentNode.click());else if("font_select"===e)""!==h&&"default"!==h&&void 0===ThemifyConstructor.font_select.safe[h]?(l=this.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],
n=h,void 0!==l?n+=":"+l.value:c.setLiveStyle("font-weight","",b.selector),ThemifyConstructor.font_select.loadGoogleFonts(n)):"default"===h&&(h=""),""!==h&&(h=ThemifyStyles.parseFontName(h));else{if(l.contains("tb_unit")){q.triggerEvent(c.$context.find("#"+g.replace("_unit",""))[0],"keyup");return}if("background-mode"===f){c.bindBackgroundMode(h,g);return}if("column-count"===f&&0==h)h="";else if(l.contains("tb_position_field"))for(l=["top","right","bottom","left"],n=this.closest(".tb_input"),p=l.length-
1;-1<p;--p){m="";if("absolute"===h||"fixed"===h){let r="#"+b.id+"_"+l[p];m="auto";n.querySelector(r+"_auto input").checked||(m=n.querySelector(r).value.trim()+n.querySelector(r+"_unit").value.trim())}c.setLiveStyle(l[p],m,b.selector)}else if("display"===f){if("none"===h)return!1;"inline-block"===h?c.setLiveStyle("width","auto",b.selector):c.setLiveStyle("width","100%",b.selector)}else"vertical-align"===f&&""!==h&&c.setLiveStyle("align-self","top"===h?"flex-start":"middle"===h?"center":"flex-end",
b.selector)}else{if("gallery"===e&&"module"!==c.type){c.bindBackgroundSlider(b);return}if(!0===p){g=this.closest(".tb_lb_option").id;!1===this.checked&&(h="");if("imageGradient"===e||!0===b.is_background){c.bindBackgroundTypeRadio(h);return}if(!0===b.is_overlay){"module"!==c.type&&c.overlayType(h);return}}else if("color"===e||"gradient"===e){"gradient"===e&&(g=this.dataset.id);if(!0===b.is_overlay){"module"!==c.type&&c.addOrRemoveComponentOverlay(e,g,h);return}"color"===e&&(l=null,"module"===c.type&&
void 0!==b.colorId&&void 0!==b.origId?(l=H.document.getElementById(b.origId),null!==l&&"image"!==l.closest(".tb_input").querySelector("input:checked").value&&(l=null)):"module"!==c.type&&"h"===c.styleTabId&&(l=c.styleTab.getElementsByClassName("tb_uploader_input")[0]),l&&""===l.value.trim()&&c.setLiveStyle("background-image",""!==h?"none":"",b.selector))}else if("image"===e||"video"===e){if("video"===e)return 0<h.length?"module"!==c.type&&(c.$liveStyledElmt.data("tbfullwidthvideo",h).attr("data-tbfullwidthvideo",
h),_.isEmpty(c.$liveStyledElmt.data("mutevideo"))&&c.$context.find("#background_video_options_mute").is(":checked")&&c.$liveStyledElmt.data("mutevideo","mute"),ThemifyBuilderModuleJs.fullwidthVideo(c.$liveStyledElmt)):c.removeBgVideo(),!1;h?h="url("+h+")":(h="",void 0!==b.colorId&&"h"===c.styleTabId&&(l=H.document.getElementById(b.colorId),null!==l&&""!==l.value.trim()&&(h="none")));l=c.styleTab.getElementsByClassName("tb_image_options");for(n=l.length-1;-1<n;--n)for(p=l[n].getElementsByClassName("tb_lb_option"),
m=p.length-1;-1<m;--m)q.triggerEvent(p[m],"change")}else{if("position_box"===e){c.position(h,g);return}if("checkbox"===e){if(null!==this.closest("#background_video_options")){c.videoOptions(this,h);return}if("height"===f&&-1!==g.indexOf("_auto_height")||"width"===f&&-1!==g.indexOf("_auto_width")){h="height"===f?b.heightID:b.widthID;this.checked?c.setData(h,f,"auto"):(l=c.styleTab.querySelector("#"+h).value.trim(),""!==l?c.setData(h,f,l+F(c.styleTab).find("#"+h+"_unit").val()):c.setData(h,f,""));return}if(!0===
b.is_position){l="#"+b.posId;n=this.closest(".tb_input");this.checked?h="auto":(h=n.querySelector(l).value.trim(),h=""===h||isNaN(h)?"":h+n.querySelector(l+"_unit").value);c.setLiveStyle(b.prop,h,b.selector);return}if("background-image"===f){this.checked||(h=!1);c.setLiveStyle(b.prop,h,b.selector);return}}}}c.setData(g,"",h)}},{passive:!0})})()}};v.prototype.getValue=function(a){return void 0!==this.module_rules[a]?this.module_rules[a]:!1};v.prototype.bindTabsSwitch=function(a){const b=this;if(!0===
a)q.body.off("themify_builder_tabsactive.hoverTabs");else q.body.on("themify_builder_tabsactive.hoverTabs",function(c,d,e){if("styling"===ThemifyConstructor.clicked){let f;if("h"!==d.split("_").pop())for(b.$liveStyledElmt[0].classList.remove("tb_visual_hover"),f=b.$liveStyledElmt[0].getElementsByClassName("tb_visual_hover"),c=f.length-1;-1<c;--c)f[c].classList.remove("tb_visual_hover");else"module"!==b.type&&(c=e.previousElementSibling.getElementsByClassName("background_type")[0])&&(c=c.querySelector("input:checked").value,
"image"===c||"gradient"===c?e.classList.remove("tb_disable_hover"):e.classList.add("tb_disable_hover")),setTimeout(function(){f=e.getElementsByClassName("tb_lb_option");let g=[];for(var h=f.length-1;-1<h;--h){var l=f[h].id,n=f[h].classList.contains("themify-gradient");!0===n&&(l=f[h].dataset.id);if(void 0!==b.module_rules[l]&&(n||null!==f[h].offsetParent))for(void 0!==b.module_rules[l].is_overlay&&b.$liveStyledElmt[0].classList.add("tb_visual_hover"),l=Array.isArray(b.module_rules[l].selector)?b.module_rules[l].selector:
[b.module_rules[l].selector],n=l.length-1;-1<n;--n){let p=l[n].split(":hover")[0];g[p]=1}}g=Object.keys(g);if(0<g.length)for(h=g.length-1;-1<h;--h)for(f=t.querySelectorAll(b.prefix+g[h]),l=f.length-1;-1<l;--l)f[l].classList.add("tb_visual_hover")},10)}})};v.prototype.getComponentBgOverlay=function(a){a||(a=this.type);return this.$liveStyledElmt.find("subrow"===a?"> .module_subrow > .builder_row_cover":"> .builder_row_cover")};v.prototype.getComponentBgSlider=function(){const a="colum"===this.type&&
"sub-column"===k.activeModel.get("component_name")?"sub-col":"colum"===this.type?"col":this.type;return this.$liveStyledElmt.children("."+a+"-slider")};v.prototype.removeBgSlider=function(){this.getComponentBgSlider().add(this.$liveStyledElmt.children(".tb_backstretch")).remove();this.$liveStyledElmt.css({position:"",background:"","z-index":""})};v.prototype.removeBgVideo=function(){this.$liveStyledElmt.removeAttr("data-tbfullwidthvideo").data("tbfullwidthvideo","").children(".big-video-wrap").remove()};
k.EdgeDrag={undoData:{},_onDrag:null,init(){const a=k.Utils.getMouseEvents();null===this._onDrag&&(this._onDrag=k.EdgeDrag.drag.bind(this));localStorage.getItem("tb_disable_padding_dragging")?(q.body[0].classList.add("tb_disable_padding_dragging"),k.Instances.Builder[k.builderIndex].el.removeEventListener(a.mousedown,this._onDrag,{passive:!0}),k.toolbar.el.getElementsByClassName("tb_padding_dragging_mode")[0].checked=!1):(k.Instances.Builder[k.builderIndex].el.addEventListener(a.mousedown,this._onDrag,
{passive:!0}),q.body[0].classList.remove("tb_disable_padding_dragging"))},addEdgesOptions(a){a=a.closest(".tb_dragger");if(!a.getElementsByClassName("tb_dragger_lightbox")[0]){const g=a.classList.contains("tb_dragger_margin")?"margin":"padding",h=k.Models.Registry.lookup(a.closest("[data-cid]").getAttribute("data-cid"));var b=h.get("elType");b="margin"===g&&("column"===b||"row"===b);var c=["%","em","px"];const l=b?["opposite"]:["all","opposite"],n=a.classList.contains("tb_dragger_top")||a.classList.contains("tb_dragger_bottom")?
"s":"e",p="1"===this.getCurrentStyling(b?"margin-top_opp_top":"checkbox_#id#_apply_all",h,g);var d=a.dataset.u||"px";const m=t.createElement("div"),r=t.createElement("ul"),u=t.createElement("ul");m.className="tb_dragger_lightbox";u.className="tb_dragger_units";r.className="tb_dragger_types";for(var e=c.length-1;-1<e;--e){var f=t.createElement("li");f.textContent=c[e];c[e]===d&&(f.className="current");u.appendChild(f)}for(c=l.length-1;-1<c;--c)d=t.createElement("li"),e=t.createElement("span"),f=!1,
d.className="tb_apply tb_apply_"+l[c],b||"opposite"!==l[c]?f=p:p||(f="#id#_opp_",f+="s"===n?"top":"left",f="1"==this.getCurrentStyling(f,h,g)),f&&(d.className+=" current"),d.appendChild(e),r.appendChild(d);m.appendChild(u);m.appendChild(r);a.getElementsByClassName("tb_dragger_options")[0].appendChild(m)}},clearEdges(){},addEdges(a,b,c){if(!("divider"===a||"row"===a&&c.classList.contains("tb-page-break"))){var d=["padding","margin"],e=["right","bottom","left","top"],f=b.get("elType"),g=[],h=e.length;
for(let u=d.length-1;-1<u;--u){var l=t.createDocumentFragment(),n=d[u],p="module"===f&&"padding"===n?c.getElementsByClassName("module")[0]:c;let z,Q="margin"===n&&("column"===a||"row"===a),G,K;"subrow"===f&&"padding"===n&&(p=c.getElementsByClassName("module_subrow")[0]);p&&(p=p.children,z=p.length-1);Q?"1"==this.getCurrentStyling("margin-top_opp_top",b,n)&&(G=this.getCurrentStyling("margin-top",b,n),K=this.getCurrentStyling("margin-top_unit",b,n)||"px"):"1"==this.getCurrentStyling("checkbox_#id#_apply_all",
b,n)&&(G=this.getCurrentStyling("#id#_top",b,n),K=this.getCurrentStyling("#id#_top_unit",b,n)||"px");for(let x=h-1;-1<x;--x){if(!("margin"!==n||"column"!==a&&"row"!==a||"right"!==e[x]&&"left"!==e[x]))continue;let y;var m=void 0,r=K;let A=G;if(p)for(m=z;-1<m;--m)if(p[m]&&p[m].classList.contains("tb_dragger_"+e[x])&&p[m].classList.contains("tb_dragger_"+n)){y=p[m];break}if(y)m=y.getElementsByClassName("tb_dragger_value")[0];else{y=t.createElement("div");m=t.createElement("span");y.className="tb_dragger tb_dragger_"+
e[x]+" tb_dragger_"+n;m.className="tb_dragger_value";let M=t.createElement("div"),I=t.createElement("span");I.className="tb_dragger_arrow";M.className="tb_dragger_options";M.tabIndex=-1;M.appendChild(m);M.appendChild(I);y.appendChild(M);l.appendChild(y)}r||(r=Q?"#id#-"+e[x]:"#id#_"+e[x],A=this.getCurrentStyling(r,b,n),r=this.getCurrentStyling(r+"_unit",b,n)||"px");void 0===A||null===A||""===A||(y.dataset.u||"px")===r&&y.dataset.v===A||(y.dataset.u=r,y.dataset.v=A,m.textContent=A+r,"padding"!==n&&
g.push(y))}"margin"===n||"module"!==f&&"subrow"!==f?c.appendChild(l):(p=c.getElementsByClassName("subrow"===f?"module_subrow":"module")[0])&&p.appendChild(l);if("padding"!==n)for(l=g.length-1;-1<l;--l)this.setValueByType(g[l],a,g[l].dataset.v,g[l].dataset.u);"row"!==f&&(l="module"===f||"subrow"===f?"column":c.classList.contains("sub_column")?"subrow":"row",n=c.closest(".module_"+l),"subrow"===l&&(n=n.parentNode),this.addEdges(l,k.Models.Registry.lookup(n.dataset.cid),n))}}},optionsClick(a){a.preventDefault();
a.stopPropagation();k.ActionBar.disable=!0;this.addEdgesOptions(a.target.closest(".tb_dragger_options"));a="LI"===a.target.nodeName?a.target:a.target.parentNode;"LI"===a.nodeName&&(!a.classList.contains("current")&&a.parentNode.classList.contains("tb_dragger_units")?this.changeUnit(a):a.parentNode.classList.contains("tb_dragger_types")&&this.changeApply(a));k.ActionBar.disable=null},changeUnit(a){const b=a.closest(".tb_dragger_lightbox").closest(".tb_dragger"),c=b.classList.contains("tb_dragger_padding")?
"padding":"margin",d=b.classList.contains("tb_dragger_top")||b.classList.contains("tb_dragger_bottom")?"s":"e",e=a.textContent||"px";var f=b.dataset.v;const g=b.dataset.u||"px";var h=b.parentNode;a=ThemifyStyles.getSheet(k.activeBreakPoint);const l=a.cssRules;let n=b.getElementsByClassName("tb_dragger_types")[0],p=h.children;var m=h.closest("[data-cid]");f=""!==f?this.convert(b,g,e,f):"";h=k.Models.Registry.lookup(m.getAttribute("data-cid"));let r=h.get("elType"),u=R.clone(m),z=F.extend(!0,{},h.get("module"===
r?"mod_settings":"styling"));n&&(n=n.getElementsByClassName("current")[0])&&(n=n.classList.contains("tb_apply_all")?"all":"opposite");"module"===r&&(r=h.get("mod_name"));const Q=ThemifyStyles.getBaseSelector(r,h.get("element_id"));m=V(l,Q);t.body.classList.add("tb_edge_drag_start");for(let x=p.length-1;-1<x;--x){let y=p[x].classList;if(y.contains("tb_dragger_"+c)){var G="left";y.contains("tb_dragger_bottom")?G="bottom":y.contains("tb_dragger_right")?G="right":y.contains("tb_dragger_top")&&(G="top");
if(p[x]!==b&&(!n||"opposite"===n&&("s"===d&&("left"===G||"right"===G)||"e"===d&&("top"===G||"bottom"===G))))continue;let A=p[x].getElementsByClassName("tb_dragger_units")[0],M=c+"-"+G,I="",N=f+e;G="margin"!==c||"column"!==r&&"row"!==r?"#id#_"+G:"#id#-"+G;!1!==m&&l[m]?(I=l[m].style[T(M)],l[m].style[T(M)]=N):(m=l.length,a.insertRule(Q+"{"+M+":"+N+";}",m));if(A){A=A.children;for(let O=A.length-1;-1<O;--O)A[O].classList.toggle("current",A[O].textContent===e)}"em"!==e&&""!==f&&(f=Math.round(f));"padding"!==
c&&this.setValueByType(p[x],r,f,e);p[x].getElementsByClassName("tb_dragger_value")[0].textContent=""===f?"":N;p[x].dataset.v=f;p[x].dataset.u=e;y.add("tb_dragger_dragged");this.setData(h,this.getFieldId(G,h,c),f,e);this.setUndoData(m,M,N,I)}}const K=this;setTimeout(function(){for(let x=p.length-1;-1<x;--x)p[x].classList.remove("tb_dragger_dragged");t.body.classList.remove("tb_edge_drag_start");e!==g&&K.addUndo(u,z);u=z=p=null},500)},changeApply(a){const b=a.closest(".tb_dragger");var c=b.parentNode;
const d=b.classList.contains("tb_dragger_padding")?"padding":"margin";var e=b.classList.contains("tb_dragger_top")||b.classList.contains("tb_dragger_bottom")?"s":"e",f=c.closest("[data-cid]");c=k.Models.Registry.lookup(f.getAttribute("data-cid"));const g=c.get("elType");f=R.clone(f);const h=F.extend(!0,{},c.get("module"===g?"mod_settings":"styling")),l=a.classList.contains("current")?"":"1",n=a.nextSibling?a.nextElementSibling:a.previousElementSibling;let p="margin-top_opp_top",m;if("margin"!==d||
"column"!==g&&"row"!==g)m="checkbox_#id#_apply_all",p="#id#_opp_"+("s"===e?"top":"left"),a.classList.contains("tb_apply_all")&&(e=p,p=m,m=e);n&&n.classList.remove("current");a.classList.toggle("current",l);this.setData(c,this.getFieldId(p,c,d),l);m&&this.setData(c,this.getFieldId(m,c,d),"");this.changeUnit(b.getElementsByClassName("tb_dragger_units")[0].getElementsByClassName("current")[0]);this.onChange();this.addUndo(f,h)},convert(a,b,c,d){if(!d)return 0;b||(b="px");c||(c="px");if(b===c)return d;
let e;a=a.parentNode;if(a.classList.contains("active_module")){var f=a.classList.contains("active_subrow")?"module_subrow":"module";a=a.getElementsByClassName(f)[0]}f="em"===c||"em"===b?parseFloat(getComputedStyle(a).fontSize):null;a="%"===c||"%"===b?a.parentNode.offsetWidth:null;"px"===b?"em"===c?e=+parseFloat(d/f).toFixed(2):"%"===c&&(e=parseFloat(100*d/a)):"%"===b?(e=parseFloat(d*a/100),e="em"===c?+parseFloat(e/f).toFixed(2):parseFloat(e)):(e=parseFloat(d*f),"%"===c&&(e=parseFloat(100*e/a)),e=
parseFloat(e));return Number(e.toFixed(2))},setValueByType(a,b,c,d){let e="margin";d||(d="px");const f=a.classList;for(let g=f.length-1;-1<g;--g)if("tb_dragger_top"===f[g]||"tb_dragger_bottom"===f[g]||"tb_dragger_left"===f[g]||"tb_dragger_right"===f[g]){e+="-"+f[g].replace("tb_dragger_","");break}"px"!==d&&""!==c&&(c=this.convert(a,d,"px",c),d="px");if(void 0===c||null===c)c="";a.style["margin-top"===e||"margin-bottom"===e?"height":"width"]=""===c?"":(0<c?c:-c)+d;if("row"===b||"column"===b)a.style[e]=
""===c?"":-c+d},getFieldId(a,b,c){const d=b.get("elType");b=ThemifyStyles.getStyleOptions("module"===d?b.get("mod_name"):d);"margin"===c&&("row"===d||"column"===d)||void 0!==b[c+"_top"]&&b[c+"_top"].type===c||(c=c[0]);return a.replace("#id#",c)},getCurrentStyling(a,b,c){const d=b.get("elType"),e="row"===d||"column"===d||"subrow"===d?b.get("styling"):b.get("mod_settings");a=this.getFieldId(a,b,c);if(null!==k.activeModel&&k.activeModel.cid===b.cid&&(b=R.Lightbox.$lightbox[0].querySelector("#"+a),null!==
b))if(b.classList.contains("themify-checkbox")){if(b=b.getElementsByClassName("tb-checkbox")[0])return b.checked?b.value:!1}else return b.value;if("desktop"===k.activeBreakPoint)return e[a];b=void 0;c=ThemifyConstructor.breakpointsReverse;const f=c.indexOf(k.activeBreakPoint);for(let g=f,h=c.length;g<h;++g)if("desktop"!==c[g]){if(void 0!==e["breakpoint_"+c[g]]&&void 0!==e["breakpoint_"+c[g]][a]&&""!==e["breakpoint_"+c[g]][a]){b=e["breakpoint_"+c[g]][a];break}}else if(""!==e[a]){b=e[a];break}void 0===
b||""===b||"column"!==d||-1===b.toString().indexOf(",")||0!==a.indexOf("padding")&&!a.indexOf("margin")||(b=b.trim().split(","),b=void 0!==b[1]&&""!==b[1]?b[1]:b[0],b=b.trim());return b},setData(a,b,c,d){c&&d&&"em"!==d&&(c=Number(c));if(null!==k.activeModel&&a.cid===k.activeModel.cid){var e=R.Lightbox.$lightbox[0].querySelector("#"+b);if(null!==e){if(e.classList.contains("themify-checkbox")){if(e=e.getElementsByClassName("tb-checkbox")[0])e.checked=!!c}else if(e.value=c,e=R.Lightbox.$lightbox[0].querySelector("#"+
b+"_unit"))e.value=d;e&&q.triggerEvent(e,"change");return}"desktop"===k.activeBreakPoint?(ThemifyConstructor.values[b]=c,d&&(ThemifyConstructor.values[b+"_unit"]=d)):(ThemifyConstructor.values["breakpoint_"+k.activeBreakPoint]||(ThemifyConstructor.values["breakpoint_"+k.activeBreakPoint]={}),ThemifyConstructor.values["breakpoint_"+k.activeBreakPoint][b]=c,d&&(ThemifyConstructor.values["breakpoint_"+k.activeBreakPoint][b+"_unit"]=d))}e="module"===a.get("elType")?"mod_settings":"styling";const f=F.extend(!0,
{},a.get(e)),g={};"desktop"!==k.activeBreakPoint?(f["breakpoint_"+k.activeBreakPoint]||(f["breakpoint_"+k.activeBreakPoint]={}),f["breakpoint_"+k.activeBreakPoint][b]=c,d&&(f["breakpoint_"+k.activeBreakPoint][b+"_unit"]=d)):(c?f[b]=c:delete f[b],d&&("px"===d?delete f[b+"_unit"]:f[b+"_unit"]=d));g[e]=f;a.set(g,{silent:!0})},onChange(){setTimeout(function(){k.Utils._onResize(!0)},1500)},setUndoData(a,b,c,d){void 0===this.undoData[k.activeBreakPoint]&&(this.undoData[k.activeBreakPoint]={});void 0===
this.undoData[k.activeBreakPoint][a]&&(this.undoData[k.activeBreakPoint][a]={});b=T(b);a=this.undoData[k.activeBreakPoint][a];void 0===a[b]&&(a[b]={});a[b].a=c;void 0===a[b].b&&(a[b].b=d)},addUndo(a,b){const c=a[0].getAttribute("data-cid");if(null===k.activeModel||k.activeModel.cid!==c){var d=k.Models.Registry.lookup(c);const e=!0===k.hasChanged,f=F.extend(!0,{},this.undoData);d=F.extend(!0,{},"module"===d.get("elType")?d.get("mod_settings"):d.get("styling"));const g=R.clone(t.getElementsByClassName("tb_element_cid_"+
c)[0]);a[0].classList.remove("tb_element_clicked");g[0].classList.remove("tb_element_clicked");k.hasChanged=!0;k.undoManager.push(c,a,g,"save",{bsettings:b,asettings:d,styles:f,column:!1});k.hasChanged=e}this.undoData={}},setModulePosition(a){const b=k.ActionBar.prevExpand;if(b){var c=a.getElementsByClassName("tb_dragger_value")[0];b.style.top="";c&&c.firstChild&&(c=c.getBoundingClientRect(),b.getBoundingClientRect().bottom>=c.top&&(b.style.top=a.offsetHeight/2+c.height+"px"))}},drag(a){if("touchstart"===
a.type||1===a.which)if(a.target.closest(".tb_dragger_options")){const g=k.Utils.getMouseEvents(),h=this,l=a.target;t.addEventListener(g.mouseup,function(n){if(l===n.target){if(n.target.classList.contains("tb_dragger_arrow")){!0!==k.ActionBar.isHoverMode&&k.ActionBar.el.classList.remove("tb_show_toolbar");this.body.classList.add("tb_dragger_options_open");let p=l.closest(".tb_dragger");const m=function(r){"mouseout"!==r.type&&r.target.closest(".tb_dragger_options")||(!0!==k.ActionBar.isHoverMode&&
k.ActionBar.el.classList.add("tb_show_toolbar"),t.removeEventListener("click",m,{passive:!0}),H.document.removeEventListener("click",m,{passive:!0}),p.removeEventListener("mouseleave",m,{once:!0,passive:!0}),p.classList.contains("tb_dragger_padding")&&p.classList.contains("tb_dragger_top")&&h.setModulePosition(p),t.body.classList.remove("tb_dragger_options_open"),(r=p.getElementsByClassName("tb_dragger_lightbox")[0])&&r.remove(),p=null)};p.addEventListener("mouseleave",m,{once:!0,passive:!0});this.addEventListener("click",
m,{passive:!0});H.document.addEventListener("click",m,{passive:!0})}h.optionsClick(n)}},{once:!0})}else if(a.target.classList.contains("tb_dragger")){a.stopImmediatePropagation();var b=a.target,c=this,d=k.Utils.getMouseEvents(),e=b.closest("[data-cid]"),f=k.Models.Registry.lookup(e.getAttribute("data-cid"));if(f){let g=[],h,l,n=a.clientX,p=a.clientY,m,r,u,z,Q,G,K,x="",y;const A=f.get("elType"),M="module"===A?f.get("mod_name"):A,I=b.classList.contains("tb_dragger_padding")?"padding":"margin",N=b.classList.contains("tb_dragger_top")||
b.classList.contains("tb_dragger_bottom")?"s":"e",O="s"===N?b.classList.contains("tb_dragger_top")?"top":"bottom":b.classList.contains("tb_dragger_left")?"left":"right",P=b.dataset.u||"px",ba=function(J){J.stopImmediatePropagation();t.body.classList.add("tb_start_animate","tb_edge_drag_start");H.document.body.classList.add("tb_start_animate","tb_edge_drag_start");t.body.style.cursor=F(b).css("cursor");k.ActionBar.hideContextMenu();k.ActionBar.clear();k.ActionBar.disable=!0;(J=b.getElementsByClassName("tb_dragger_lightbox")[0])&&
J.remove();c.addEdgesOptions(b);m=parseFloat(b.dataset.v)||0;m="em"!==P?parseInt(m):Number(m.toFixed(2));(r=b.getElementsByClassName("tb_dragger_types")[0])&&(r=r.getElementsByClassName("current")[0])&&(r=r.classList.contains("tb_apply_all")?"all":"opposite");u=R.clone(e);Q=F.extend(!0,{},f.get("module"===A?"mod_settings":"styling"));z=null!==k.activeModel&&k.activeModel.cid===f.cid;x=ThemifyStyles.getBaseSelector(M,f.get("element_id"));G=ThemifyStyles.getSheet(k.activeBreakPoint);K=G.cssRules;y=
V(K,x);h="module"===A?e.getElementsByClassName("module")[0]:"subrow"===A?e.getElementsByClassName("module_subrow")[0]:e;e.style.willChange=I;J=b.parentNode.children;for(let C=J.length-1;-1<C;--C){let D=J[C].classList;if(D.contains("tb_dragger_"+I)){let w="left";D.contains("tb_dragger_bottom")?w="bottom":D.contains("tb_dragger_right")?w="right":D.contains("tb_dragger_top")&&(w="top");if(O===w||r&&("opposite"!==r||("s"!==N||"left"!==w&&"right"!==w)&&("e"!==N||"top"!==w&&"bottom"!==w)))J[C].classList.add("tb_dragger_dragged"),
g.push({el:J[C],prop:I+"-"+w,text:J[C].getElementsByClassName("tb_dragger_value")[0]})}}e.classList.add("tb_element_clicked")},ca=function(J){J.stopImmediatePropagation();l&&cancelAnimationFrame(l);l=requestAnimationFrame(function(){var C=J.clientX,D=J.clientY;var w="px"===P||"%"===P?1:.1;var E=b.getBoundingClientRect();var L="e"===N?"left"===O?C-E.right:E.left-C:"top"===O?D-E.bottom:E.top-D;if("e"===N&&40<E.width&&(C<E.left||C>E.right)||"s"===N&&40<E.height&&(D<E.top||D>E.bottom))if("%"===P&&65<
m||"px"===P&&51<m||"em"===P&&1.5<m)0>L&&(L*=-1),50<L&&(w=100<L?300<L?6*w:w*(150<L?200<L?5:4:3):2*w);"e"===N?C!==p&&(m=C>p?"left"===O?m+w:m-w:"left"===O?m-w:m+w):D!==n&&(m=D>n?m+w:m-w);p=C;n=D;0>m&&"padding"===I?m=0:0!==m%1&&(m=parseFloat(m.toFixed(1)));C=m+P;for(D=g.length-1;-1<D;--D){w=g[D].prop;E=g[D].el;L=g[D].text;h.style[w]=C;!0===z&&k.liveStylingInstance.setLiveStyle(w,C,x);if("margin"===I){let W=E.classList.contains("tb_dragger_top")||E.classList.contains("tb_dragger_bottom")?"height":"width",
S=m,U=P;"px"!==U&&(S=c.convert(E,U,"px",S),U="px");if("row"===A||"column"===A)E.style[w]=""===C?"":-S+U;E.style[W]=0>m?-S+U:S+U}L.textContent=0===m?"":C}})};t.addEventListener(d.mouseup,function(J){this.removeEventListener(d.mousemove,ba,{passive:!0,once:!0});this.removeEventListener(d.mousemove,ca,{passive:!0});q.trigger("tbDisableInline");u&&(l&&cancelAnimationFrame(l),this.body.style.cursor=e.style.willChange="",this.body.classList.remove("tb_start_animate","tb_edge_drag_start"),H.document.body.classList.remove("tb_start_animate",
"tb_edge_drag_start"),q.trigger("tbresizeImageEditor"),requestAnimationFrame(function(){e.classList.remove("tb_element_clicked");for(let D=g.length-1;-1<D;--D){let w=g[D].el,E=g[D].prop,L=h.style[E];var C=E.replace(I+"-","");let W="";C="margin"!==I||"column"!==A&&"row"!==A?"#id#_"+C:"#id#-"+C;let S=w.getElementsByClassName("tb_dragger_lightbox")[0];0===m&&"margin"===I&&(w.style[T(g[D].prop)]=w.style.width=w.style.height="");S&&S.remove();!1!==y&&K[y]?(W=K[y].style[T(E)],K[y].style[T(E)]=L):(y=K.length,
G.insertRule(x+"{"+E+":"+L+";}",y));h.style[E]="";!1===z&&c.setUndoData(y,E,L,W);w.dataset.v=m;w.dataset.u=P;w.classList.remove("tb_dragger_dragged");c.setData(f,c.getFieldId(C,f,I),m,P)}"padding"===I&&"top"===O&&"module"===A&&c.setModulePosition(g[0].el);c.onChange();k.Utils.runJs(F(e),null,!0);!1===z&&c.addUndo(u,Q);k.ActionBar.disable=r=h=k.ActionBar.hoverCid=l=G=K=y=x=z=g=u=Q=m=n=p=null;k.hasChanged=!0}))},{once:!0,passive:!0});t.addEventListener(d.mousemove,ba,{passive:!0,once:!0});t.addEventListener(d.mousemove,
ca,{passive:!0})}}}};k.createStyleInstance=function(){return new v}})(jQuery,Themify,window,window.top,document,tb_app,ThemifyBuilderCommon);
