'use strict';((l,n)=>{const p="mobile"===l.device,q=b=>({mute:"unmute"!==b.getAttribute("data-mutevideo"),loop:"unloop"!==b.getAttribute("data-unloopvideo")}),t=b=>{l.cssLazy.tb_fullwidth_video?b():l.LoadCss(ThemifyBuilderModuleJs.cssUrl+"fullwidthvideo.css",null,null,null,()=>{l.cssLazy.tb_fullwidth_video=!0;b&&b()})},r=(b,h,f,d)=>{const e=n.createElement("div"),a=n.createElement("iframe");e.className="tb_fullwidth_video tf_lazy tb_"+f+" tf_abs tf_w tf_h tf_overflow";a.setAttribute("allowfullscreen",
!1);a.setAttribute("webkitallowfullscreen",!1);a.setAttribute("mozallowfullscreen",!1);a.className="tf_mw tf_w tf_h";a.id=b;a.src=encodeURI(h);d&&(a.setAttribute("data-autoplay",!0),a.setAttribute("allow","autoplay"));a.setAttribute("unselectable","on");e.appendChild(a);return e},u=(b,h,f)=>{b=q(b);const d="tb_vimeo_"+f;h=new URL(h);f="https://player.vimeo.com/video/"+f+"?api=1&byline=0&autopause=0&portrait=0&title=0&badge=0&controls=0&playsinline=1&callback=tb_vimeo&player_id="+d;let e=!1;b.loop&&
(f+="&loop=1");!1!==b.autoplay&&(f+="&autoplay=1",e=b.mute=!0);!0===b.mute&&(f+="&muted=1");h.hash&&0===h.hash.indexOf("#t=")&&(f+=h.hash);b=r(d,f,"vimeo",e);const a=b.firstChild,g=c=>{if(-1!==c.origin.indexOf("player.vimeo.com")&&a&&a.contentWindow&&(c=JSON.parse(c.data),d===c.player_id))if("ready"===c.event)a.contentWindow.postMessage(JSON.stringify({method:"getVideoWidth"}),"https://player.vimeo.com"),a.contentWindow.postMessage(JSON.stringify({method:"getVideoHeight"}),"https://player.vimeo.com");
else if("getVideoWidth"===c.method||"getVideoHeight"===c.method){"getVideoWidth"===c.method?a.setAttribute("width",c.value):a.setAttribute("height",c.value);c=a.getAttribute("width");const m=a.getAttribute("height");m&&c&&(window.removeEventListener("message",g,{passive:!0}),a.style.minHeight=100*parseFloat(m/c)+"vw",a.style.minWidth=100*parseFloat(c/m)+"vh",a.parentNode.classList.remove("tf_lazy"))}};window.addEventListener("message",g,{passive:!0});return b},v=(b,h,f)=>{if(!1===p&&f){f=f.toString();
var d=q(b),e=new URL(h);b="tb_ytb_"+f;let a="https://www.youtube-nocookie.com/embed/"+f+"?modestbranding=1&playsinline=1&controls=0&showinfo=0&rel=0&disablekb&fs=0&version=3&allowfullscreen=false&wmode=transparent&iv_load_policy=3&playerapiid="+b+"&playlist="+f;f=640;h=360;let g=!1;d.loop&&(a+="&loop=1");!1!==d.autoplay&&(a+="&autoplay=1",g=d.mute=!0);!0===d.mute&&(a+="&mute=1");if(e){d=e.searchParams.get("t");const c=e.searchParams.get("w");e=e.searchParams.get("h");d&&(a+="&start="+parseInt(d));
c&&(f=c);e&&(h=e)}b=r(b,a,"ytb",g);e=b.firstChild;e.style.minHeight=100*parseFloat(h/f)+"vw";e.style.minWidth=100*parseFloat(f/h)+"vh";e.addEventListener("load",function(){this.parentNode.classList.remove("tf_lazy")},{passive:!0,once:!0});return b}};l.on("builder_load_module_partial",(b,h,f)=>{let d;if(!0===f){if(!b[0].hasAttribute("data-tbfullwidthvideo"))return;d=[b[0]]}else d=l.selectWithParent("[data-tbfullwidthvideo]",b);void 0!==d[0]&&t(()=>{for(let c=d.length-1;-1<c;--c){var e=d[c].getAttribute("data-tbfullwidthvideo");
if(e){var a=l.parseVideo(e),g=d[c].getElementsByClassName("tb_fullwidth_video")[0];g&&g.parentNode===d[c]&&d[c].removeChild(g);if("youtube"===a.type)a=v(d[c],e,a.id);else if("vimeo"===a.type)a=u(d[c],e,a.id);else if(a=d[c],!1===p||"play"===a.getAttribute("data-playonmobile")){g=!0===p?{loop:"unloop"!==a.getAttribute("data-unloopvideo"),mute:!0}:q(a);const m=n.createElement("div"),k=n.createElement("video");m.className="tb_fullwidth_video tb_local_video tf_abs tf_w tf_h";k.className="tf_w tf_h";k.setAttribute("type",
"video/"+e.split(".").pop().split("?")[0]);k.preload="auto";"no"===a.dataset.autoplay?g.autoplay=!1:k.setAttribute("data-autoplay",!0);k.setAttribute("webkit-playsinline",1);k.setAttribute("playsinline",!0);k.src=e;!1!==g.autoplay&&(k.autoplay=!0,g.mute=!0);!0===g.mute&&(k.muted=!0);!0===g.loop&&(k.loop=!0);m.appendChild(k);a=m}else a=void 0;a&&(d[c].insertBefore(a,d[c].firstChild),l.trigger("tb_fullwidth_video_added",[d[c]]))}}})})})(Themify,document);
