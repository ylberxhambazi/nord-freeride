(($,r)=>{'use strict';r.on('builder_load_module_partial',(e,t)=>{if(!0!==t||e.classList.contains('module-optin')){const o=r.selectWithParent('tb_optin_form',e);o[0]&&r.requestIdleCallback(()=>{{var t=o[0];const s=t=>{const e=new FormData(t),a=t.querySelector('[name="g-recaptcha-response"]');null!==a&&e.append('contact-recaptcha',a.value),$.ajax({url:t.action,method:'POST',processData:!1,contentType:!1,cache:!1,data:e,success(e){e.success?'s1'===t.dataset.success?window.location.href=e.data.redirect:$(t).fadeOut().closest('.module').find('.tb_optin_success_message').fadeIn():console.log(e.data.error)},complete(){t.classList.remove('processing'),'object'==typeof grecaptcha&&'v2'===t.find('.themify_captcha_field').data('ver')&&grecaptcha.reset()}})},a=c=>{r.is_builder_active||c.tfOn('submit',function(e){e.preventDefault();const a=this;if(a.classList.contains('processing'))return!1;a.className+=' processing';const t=c.tfClass('themify_captcha_field')[0];t&&'v3'===t.dataset.ver&&'undefined'!=typeof grecaptcha?grecaptcha.ready(()=>{grecaptcha.execute(t.dataset.sitekey,{action:'captcha'}).then(e=>{const t=document.createElement('input');t.type='hidden',t.name='g-recaptcha-response',t.value=e,a.prepend(t),s(a)})}):s(a)})},c=t.tfClass('themify_captcha_field')[0];if(c&&'undefined'==typeof grecaptcha){const n=c.dataset.sitekey;if(n){let e='https://www.google.com/recaptcha/api';'v3'===c.dataset.ver&&(e+='?render='+n),r.loadJs(e,'undefined'!=typeof grecaptcha,!1).then(()=>{a(t)})}}else a(t)}},300)}})})(jQuery,Themify);