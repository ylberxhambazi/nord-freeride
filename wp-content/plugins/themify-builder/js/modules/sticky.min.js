'use strict';((q,m)=>{let x,r,t=!1,y=q.w,n=q.h,z=!1;const k=new Map,A="m"===tbLocalScript.is_sticky?parseInt(tbLocalScript.breakpoints.tablet[1]):!1,v=function(a,c){x&&cancelAnimationFrame(x);!0!==t&&(x=requestAnimationFrame(()=>{const b=m.pageYOffset;var h=c?c:k;for(let l of h){h=l[0];let f=l[1];var g=h.classList.contains("tb_sticky_scroll_active");if("disable"!==f)if(!0===f.isBottom&&b+n>=f.space||!0!==f.isBottom&&b>f.space){if(!1===g&&(h.style.width=f.w+"px",h.parentNode.style.height=f.h+"px",
h.style.position="fixed",h.style.top=f.value,h.classList.add("tb_sticky_scroll_active")),f.unstick&&f.unstick.item){g=f.unstick;let d=parseInt(f.value);var e=g.item.getBoundingClientRect();if("builder"===g.type)e=e.bottom-f.h-d;else if(e="passes"===g.r?e.bottom-d:e.top-f.h-d,"top"===g.cur||"bottom"===g.cur)e+=g.v,"bottom"===g.cur&&(e-=n);e=0>e?e+d+"px":f.value;f.currentTop!==e&&(f.currentTop=e,k.set(h,f),h.style.top=e)}}else!0===g&&u(h)}}))},u=a=>{a.style.width=a.style.top=a.style.bottom=a.style.position=
a.parentNode.style.height="";a.classList.remove("tb_sticky_scroll_active")},C=new MutationObserver(a=>{if(a[0]){let c=a[0].target.closest("[data-sticky-active]");c&&(r&&cancelAnimationFrame(r),r=requestAnimationFrame(()=>{q.imagesLoad(c,b=>{const h=new Map;u(b);w(b);h.set(b,k.get(b));v(null,h);r=null})}))}}),w=(a,c,b)=>{const h=a.classList.contains("tb_sticky_scroll_active");if(!1===h||!0===b){if(!k.has(a)||!0===b){b=JSON.parse(a.getAttribute("data-sticky-active"));var g=!1,e=tbLocalScript.breakpoints,
l=Object.keys(e);for(var f=l.length-1;-1<f;--f){let p=l[f],B="tablet_landscape"===p?"tl":p[0];if(void 0!==b[B]&&("mobile"!==p?e[p][1]:e[p])>=y){g=b[B];break}}!1===g&&(g=b.d);b=g;if(!b){k.set(a,"disable");u(a);return}e=b.stick||{};l=e.v?parseInt(e.v):0;g=b.unstick;f=e.u||"px";"px"!==f?b.u=f:b.value=l+f;b.v=l;"bottom"===e.p&&(b.isBottom=!0);if(g){var d;e=a.closest(".themify_builder_content");if("builder"===g.type){if(d=e.closest("#tbp_header"))d=document.getElementById("tbp_content"),(d=null!==d?d.getElementsByClassName("themify_builder_content")[0]:
document.getElementsByClassName("themify_builder_content")[1])&&(e=d);d=e}else"row"===g.type&&(d=e.getElementsByClassName("tb_"+g.el)[0]),d||(d=e.getElementsByClassName("tb_"+g.el)[0]),d&&(g.v=parseInt(g.v));d&&(g.item=d)}a.parentNode.classList.contains("tb_sticky_wrapper")||(d=document.createElement("div"),d.className="tb_sticky_wrapper",a.parentNode.insertBefore(d,a),d.appendChild(a));k.set(a,b)}b=k.get(a);"disable"!==b&&(!0===h&&(a.style.position=""),c||(a.style.width="",c=a.getBoundingClientRect()),
b.w=0<c.width?c.width:a.offsetWidth,b.h=0<c.height?c.height:a.offsetHeight,d=b.v,"%"===b.u&&0!==d&&(d=d/100*n),!0===b.isBottom&&(d=n-d-b.h),b.value=d+"px",b.space=void 0!==b.isBottom?c.bottom+m.pageYOffset+d:c.top+m.pageYOffset-d,b.t=c.top,a.parentNode.style.height!==b.h+"px"&&(a.parentNode.style.height=b.h+"px"),!0===h&&(a.style.position="fixed"),k.set(a,b))}},D=new IntersectionObserver((a,c)=>{for(c=a.length-1;-1<c;--c)!0===a[c].isIntersecting&&w(a[c].target,a[c].boundingClientRect)},{threshold:[.3,
.4,.5,.6,.7,.8,.9,1]});q.on("tb_sticky_init",a=>{a instanceof jQuery&&(a=a.get());for(var c=a.length-1;-1<c;--c)D.observe(a[c]),C.observe(a[c],{subtree:!0,childList:!0});if(!1===z){z=!0;if(0<m.pageYOffset){for(c=a.length-1;-1<c;--c)w(a[c],a[c].getBoundingClientRect());v()}m.addEventListener("scroll",v,{passive:!0})}}).on("tfsmartresize",a=>{if(a){y=a.w;n=a.h;t=!!(A&&A>=y);for(let c of k)!0===t?u(c[0]):w(c[0],null,!0);!1===t&&v()}})})(Themify,window);
