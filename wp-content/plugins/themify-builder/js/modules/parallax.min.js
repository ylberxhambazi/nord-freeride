'use strict';((p,e,f,q)=>{function l(a){this.element=a;this.init()}const c=[],m=()=>{for(let a=c.length-1;-1<a;--a)c[a]&&c[a].element?c[a].update(a):g(a)},n=a=>{a&&(h=a.h);for(a=c.length-1;-1<a;--a)c[a]&&c[a].element?(c[a].top=c[a].element.offset().top,c[a].update(a)):g(a)},g=a=>{c[a]&&(c[a].classList&&c[a].classList.remove("builder-parallax-scrolling"),c.splice(a,1),0===c.length&&(e.off("tfsmartresize",n),f.removeEventListener("scroll",m,{passive:!0}),k=null))};let h=null,k=null;l.prototype={top:0,
init(){this.top=this.element.offset().top;const a=this.element.css("background-image").replace(/(url\(|\)|")/g,"");if(a&&"none"!==a&&a.match(/\.(jpe?g|gif|png|svg)$/)){const d=new Image,b=this;d.src=a;d.decode().then(()=>{b.w=d.width;b.h=d.height}).catch(r=>{console.error("Parrallax("+a+"): "+r)}).finally(()=>{c.push(b);b.update()})}else c.push(this),this.update();null===k&&(h=e.h,e.on("tfsmartresize",n),f.addEventListener("scroll",m,{passive:!0}),k=!0)},update(a){if(!1!==q.body.contains(this.element[0])&&
this.element[0].classList.contains("builder-parallax-scrolling")){var d=f.pageYOffset,b=this.element.offset().top;a=this.element.outerHeight(!0);b+a<d||b>d+h||(this.element[0].style.backgroundPositionY="calc(50% + "+Math.round(.1*(b-d))+"px)",b=Math.max(this.element.outerWidth(!0)/this.w,a/this.h),d=Math.round(this.w*b),b=Math.round(this.h*b),this.element[0].style.backgroundSize=b===Math.round(a)?Math.round(1.3*d)+"px "+Math.round(1.3*b)+"px":"")}else g(a)}};e.on("builder_load_module_partial",(a,
d,b)=>{if(!0===b){if(!a[0].classList.contains("builder-parallax-scrolling"))return;a=[a[0]]}else a=e.selectWithParent("builder-parallax-scrolling",a);for(d=a.length-1;-1<d;--d)b=p(a[d]),b.data("plugin_builderParallax")||b.data("plugin_builderParallax",new l(b))})})(jQuery,Themify,window,document);
