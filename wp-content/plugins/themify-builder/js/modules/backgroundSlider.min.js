'use strict';((u,t,q)=>{!function(b,e,k){b.fn.tb_backstretch=function(c,d){return void 0!==d&&(void 0===d.mode&&(void 0!==e.themifyScript&&e.themifyScript.backgroundMode?d.mode=themifyScript.backgroundMode:void 0!==e.themifyVars&&e.themifyVars.backgroundMode&&(d.mode=themifyVars.backgroundMode)),void 0===d.position&&(void 0!==e.themifyScript&&e.themifyScript.backgroundPosition&&e.themifyScript.backgroundPosition?d.position=e.themifyScript.backgroundPosition:void 0!==e.themifyVars&&e.themifyVars.backgroundPosition&&
e.themifyVars.backgroundPosition&&(d.position=e.themifyVars.backgroundPosition)),void 0===d.is_first&&(d.is_first=!0)),(c===k||0===c.length)&&b.error("No images were supplied for Backstretch"),0===b(e).scrollTop()&&e.scrollTo(0,0),this.each(function(){var f=b(this),a=f.data("tb_backstretch");if(a){if("string"==typeof c&&"function"==typeof a[c])return void a[c](d);d=b.extend(a.options,d);a.destroy(!0)}a=new l(this,c,d);f.data("tb_backstretch",a)})};b.tb_backstretch=function(c,d){return b("body").tb_backstretch(c,
d).data("tb_backstretch")};b.expr.pseudos.tb_backstretch=function(c){return b(c).data("tb_backstretch")!==k};b.fn.tb_backstretch.defaults={centeredX:!0,centeredY:!0,duration:5E3,fade:0,mode:"",position:""};var m={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},r={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},l=function(c,d,f){for(var a in this.options=b.extend({},
b.fn.tb_backstretch.defaults,f||{}),this.images=b.isArray(d)?d:[d],this.images)b("<img />")[0].src=void 0===this.images[a].url?this.images[a]:this.images[a].url;this.isBody=c===document.body;this.$container=b(c);this.$root=this.isBody?b(e):this.$container;c=this.$container.children(".tb_backstretch").first();this.$wrap=c.length?c:b('<div class="tb_backstretch"></div>').css(m).appendTo(this.$container);this.isBody||(c=this.$container.css("position"),d=this.$container.css("zIndex"),this.$container.css({position:"static"===
c?"relative":c,zIndex:"auto"===d?0:d,backgroundImage:"none"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody?"fixed":"absolute"});this.index=0;this.show(this.index,this.options.is_first);b(e).on("resize.tb_backstretch",b.proxy(this.resize,this)).on("orientationchange.tb_backstretch",b.proxy(function(){this.isBody&&0===e.pageYOffset&&(e.scrollTo(0,1),this.resize())},this))};l.prototype={resize(){try{var c,d={left:0,top:0},f=this.isBody?this.$root.width():this.$root.innerWidth(),
a=f,g=this.isBody?e.innerHeight?e.innerHeight:this.$root.height():this.$root.innerHeight(),n=a/this.$img.data("ratio");"best-fit"===this.options.mode&&(a/g>parseFloat(this.$img.data("ratio"))?this.$img.addClass("best-fit-vertical").removeClass("best-fit-horizontal"):this.$img.addClass("best-fit-horizontal").removeClass("best-fit-vertical"));n>=g?(c=(n-g)/2,this.options.centeredY&&(d.top="-"+c+"px")):(c=((a=(n=g)*this.$img.data("ratio"))-f)/2,this.options.centeredX&&(d.left="-"+c+"px"));this.$wrap.css({width:f,
height:g}).find("img:not(.deleteable)").css({width:a,height:n}).css(d)}catch(h){}return this},show(c,d){if(!(Math.abs(c)>this.images.length-1)){var f,a=this,g=a.$wrap.find("img").addClass("deleteable"),n={relatedTarget:a.$container[0]};return a.$container.trigger(b.Event("tb_backstretch.before",n),[a,c]),this.index=c,clearInterval(a.interval),a.$img=b("<img />").css(r).bind("load",function(h){var p=this.width||b(h.target).width();if(h=this.height||b(h.target).height(),b(this).data("ratio",p/h),void 0!==
a)"best-fit"===a.options.mode?(b(this).parent().addClass("best-fit-wrap"),h=p/h,a.$wrap.width()/a.$wrap.height()>h?b(this).addClass("best-fit best-fit-vertical"):b(this).addClass("best-fit best-fit-horizontal")):"fullcover"===a.options.mode&&a.options.position?b(this).addClass("fullcover-"+a.options.position):"kenburns-effect"===a.options.mode&&b(this).parent().addClass("kenburns-effect"),d&&b(this).show();b(this).fadeIn(a.options.speed||a.options.fade,function(){g.remove();a.paused||a.cycle();b(["after",
"show"]).each(function(){a.$container.trigger(b.Event("tb_backstretch."+this,n),[a,c])})});a.resize()}).appendTo(a.$wrap),void 0===a.images[c].url?f=a.images[c]:(f=a.images[c].url,a.images[c].alt&&a.$img.attr("alt",a.images[c].alt)),a.$img.attr("src",f),a}},next(){return this.show(this.index<this.images.length-1?this.index+1:0,!1)},prev(){return this.show(0===this.index?this.images.length-1:this.index-1,!1)},pause(){return this.paused=!0,this},resume(){return this.paused=!1,this.next(),this},cycle(){return 1<
this.images.length&&(clearInterval(this.interval),this.interval=setInterval(b.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy(c){b(e).off("resize.tb_backstretch orientationchange.tb_backstretch");clearInterval(this.interval);c||this.$wrap.remove();this.$container.removeData("tb_backstretch")}}}(jQuery,window);q.autoplay=q.backgroundSlider&&q.backgroundSlider.autoplay?parseInt(q.backgroundSlider.autoplay.autoplay,10):5E3;const v=b=>{10>=q.autoplay&&(q.autoplay*=
1E3);for(let k=b.length-1;-1<k;--k){let m=u(b[k]),r=m.parent(),l=b[k].getElementsByTagName("li"),c=[];for(var e=l.length-1;-1<e;--e)c.push({url:l[e].getAttribute("data-bg"),alt:l[e].getAttribute("data-bg-alt")});r.tb_backstretch(c,{speed:parseInt(b[k].getAttribute("data-sliderspeed")),duration:q.autoplay,mode:b[k].getAttribute("data-bgmode")});let d=r.data("tb_backstretch"),f=m.find(".row-slider-slides > li");l=b[k].querySelectorAll(".row-slider-prev,.row-slider-next,.row-slider-dot");for(e=l.length-
1;-1<e;--e)l[e].addEventListener("click",function(a){this.classList.contains("row-slider-dot")?d.show(u(this).data("index")):(a.preventDefault(),this.classList.contains("row-slider-prev")?d.prev():d.next())},{passive:l[e].classList.contains("row-slider-dot")});f[0]&&(f[0].classList.add("row-slider-dot-active"),r.on("tb_backstretch.show",(a,g)=>{a=f.eq(d.index);a[0]&&(f.removeClass("row-slider-dot-active"),a.addClass("row-slider-dot-active"))}));if("kenburns-effect"===b[k].getAttribute("data-bgmode")){let a,
g=0;const n=4<c.length?4:c.length;r.on("tb_backstretch.before",(h,p)=>{setTimeout(()=>{a!=p.index&&(p.$wrap.find("img").last().addClass("kenburns-effect"+(g+1>n?g=1:++g)),a=p.index)},50)}).on("tb_backstretch.after",(h,p)=>{h=p.$wrap.find("img").last();/kenburns-effect\d/.test(h.attr("class"))||(h.addClass("kenburns-effect"+(g+1>n?g=1:++g)),a=p.index)});if(t.is_builder_active)r.on("backstretch.show",(h,p,w)=>{r.css("zIndex",0)})}}};t.on("builder_load_module_partial",(b,e,k)=>{let m;if(!0===k){if("DIV"!==
b[0].tagName||b[0].classList.contains("module"))return;b=b[0].querySelector(":scope>.tb_slider");if(null===b)return;m=[b]}else m=t.selectWithParent("tb_slider",b);void 0!==m[0]&&(!0!==t.cssLazy.tb_bgslider_css?t.LoadCss(ThemifyBuilderModuleJs.cssUrl+"backgroundSlider.css",null,null,null,()=>{t.cssLazy.tb_bgslider_css=!0;v(m)}):v(m))})})(jQuery,Themify,tbLocalScript);
