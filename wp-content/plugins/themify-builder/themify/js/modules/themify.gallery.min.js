'use strict';((e,h,m,n)=>{const r={origHash:null,config:{},init(a){this.config=a;this.initLightbox();this.openAnchor()},lightboxSelector(a){a.preventDefault();a.stopImmediatePropagation();if(!e(".mfp-wrap.mfp-gallery").length){var b=e(this),c=b.find("> a");c=0===c.length?b.attr("href"):c.attr("href");var f=r,d=f.getFileType(c);a=f.isVideo(c);var u=h.parseVideo(c),v={},l=b.parents(".tf_swiper-container");var p=0<l.length?"inline"===d||"iframe"===d?[]:b.data("rel")?e('a[data-rel="'+b.data("rel")+'"]'):
l.find(".tf_swiper-slide:not(.tf_swiper-slide-duplicate) .themify_lightbox img").parents(".themify_lightbox"):"inline"===d||"iframe"===d?[]:b.data("rel")?e('a[data-rel="'+b.data("rel")+'"]'):b.closest(".themify_builder_content>.module_row, .loops-wrapper, .gallery-wrapper").find(".themify_lightbox img").parents(".themify_lightbox");e.uniqueSort(p);var t=0<l.length&&l[0].swiper?l[0].swiper.realIndex:1<p.length?p.index(this):0;l=a?"100%":f.getParam("width",c)?f.getParam("width",c):"94%";var w=a?"100%":
f.getParam("height",c)?f.getParam("height",c):"100%";-1===l.indexOf("%")&&(l+="px");-1===w.indexOf("%")&&(w+="px");if(!0===a&&("youtube"===u.type||"vimeo"===u.type)){const g=f.getCustomParams(c);g&&("youtube"===u.type?(v.youtube={id:"v=",index:"youtube.com/",src:"//www.youtube.com/embed/%id%"+g},c=f.getYoutubePath(c)):(v.vimeo={id:"/",index:"vimeo.com/",src:"//player.vimeo.com/video/%id%"+g},c=c.split("?")[0]))}if(1<p.length&&-1!==t){var q=[];p.each(function(g,k){q.push({src:f.getiFrameLink(e(k).prop("href")),
title:f.getTitle(k),type:f.getFileType(e(k).prop("href"))})});q=q.reduce(function(g,k){0===g.filter(function(x){return k.src===x.src}).length&&(k.src===c&&(t=g.length),g.push(k));return g},[])}else t=0,q={src:f.getiFrameLink(c),title:f.getTitle(this)};h.isTouch&&!n.MSStream&&/iPad|iPhone|iPod/.test(navigator.userAgent);d={items:q,type:d,image:{markup:f.getImageMarkup(this)},iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: '+l+" !important; height: "+w+';"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-iframe-wrapper"><iframe class="mfp-iframe" noresize="noresize" frameborder="0" allowfullscreen></iframe></div>'+
f.getSocialMarkup()+"</div>",patterns:v},callbacks:{beforeOpen(){m.body.classList.add("themify_mp_opened")},open(){f.updateHash("open",this);f.openSharing(this);let g=b.data("zoom-config"),k={};g&&(g=g.split("|"),g[0]&&(k.width=g[0]),"undefined"!==typeof g[1]&&(k.height=g[1]),e(this.content).parent().css(k))},change(){f.updateHash("open",this)},close(){f.updateHash("close")},afterClose(){m.body.classList.remove("themify_mp_opened")}}};1<p.length&&e.extend(d,{gallery:{enabled:!0,tCounter:f.config.i18n?
f.config.i18n.tCounter:""}});0<b.find("img").length&&e.extend(d,{mainClass:"mfp-with-zoom",zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener(){return b.find("img")}}});d.mainClass=d.mainClass?d.mainClass:"";d.mainClass+=a?" video-frame":" standard-frame";d.fixedContentPos=!0;f.isInIframe()?n.parent.jQuery.magnificPopup.open(d):e.magnificPopup.open(d,t)}},gallerySelector(a){const b=r;if("image"===b.getFileType(e(this).prop("href"))){var c=e(b.config.gallerySelector,e(this).closest(".module, .gallery, .gallery-wrapper").not(".module-gallery"));
if(c.length){a.preventDefault();a.stopImmediatePropagation();var f=[];c.each(function(){var d=e(this).prop("title");d=""!==d?d:"undefined"!==typeof e(this).children("img").prop("alt")?e(this).children("img").prop("alt"):"";0<e(this).parent().next(".gallery-caption").length?d=e(this).parent().next(".wp-caption-text").html():0<e(this).find(".gallery-caption").find(".entry-content").length&&(d=e(this).find(".gallery-caption").find(".entry-content").text());f.push({src:e(this).prop("href"),title:d,type:"image"})});
a={gallery:{enabled:!0},image:{markup:b.getImageMarkup(this)},items:f,mainClass:"mfp-with-zoom",zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener(d){d=e(c[d.index]);return d.is("img")?d:d.find("img")}},callbacks:{open(){b.updateHash("open",this);b.openSharing(this)},change(){b.updateHash("open",this)},close(){b.updateHash("close")}}};b.isInIframe()?n.parent.jQuery.magnificPopup.open(a,c.index(this)):e.magnificPopup.open(a,c.index(this))}}},contentImagesAreas(a){const b=r;if("image"===
b.getFileType(this.getAttribute("href"))&&e(this).closest(b.config.contentImagesAreas)){a.preventDefault();a.stopImmediatePropagation();const c=e(this);a={items:{src:c.prop("href"),title:0<c.next(".wp-caption-text").length?c.next(".wp-caption-text").html():c.children("img").prop("alt")},image:{markup:b.getImageMarkup(this)},type:"image",callbacks:{open(){b.updateHash("open",this);b.openSharing(this)},change(){b.updateHash("open",this)},close(){b.updateHash("close")}}};0<c.find("img").length&&e.extend(a,
{mainClass:"mfp-with-zoom",zoom:{enabled:!h.isTouch,duration:300,easing:"ease-in-out",opener(){return c.find("img")}}});b.isInIframe()?n.parent.jQuery.magnificPopup.open(a):e.magnificPopup.open(a)}},initLightbox(){h.body.off("click",this.config.lightboxSelector,this.lightboxSelector).on("click",this.config.lightboxSelector,this.lightboxSelector);if(this.config.gallerySelector)h.body.off("click",this.config.gallerySelector,this.gallerySelector).on("click",this.config.gallerySelector,this.gallerySelector);
if(this.config.contentImagesAreas)h.body.off("click",".post-content a",this.contentImagesAreas).on("click",".post-content a",this.contentImagesAreas)},isInIframe(){return this.config.extraLightboxArgs&&this.config.extraLightboxArgs.displayIframeContentsInParent},getFileType(a){let b;try{b=new URL(a)}catch(c){b=a}return(b&&"object"===typeof b?a.replace(b.search,""):a).match(/\.(gif|jpg|jpeg|tiff|png|webp|apng)$/i)?"image":a.match(/\bajax=true\b/i)?"ajax":"#"===a.substr(0,1)?"inline":"iframe"},isVideo(a){return this.isYoutube(a)||
this.isVimeo(a)||a.match(/\b.mov\b/i)||a.match(/\b.swf\b/i)},isYoutube(a){return"youtube"===h.parseVideo(a).type},isVimeo(a){return"vimeo"===h.parseVideo(a).type},getYoutubePath(a){return"//youtube.com/watch?v="+(a.match(/youtu\.be/i)?a.match(/youtu\.be\/([^\?]*)/i)[1]:this.getParam("v",a))},getiFrameLink(a){"iframe"===this.getFileType(a)&&null===this.isVideo(a)&&(h.parseVideo(a),a=h.UpdateQueryString("iframe","true",a));return a},getParam(a,b){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+
a+"=([^&#]*)")).exec(b);return null==a?"":a[1]},getCustomParams(a){a=(a=a.split("?")[1])?"&"+a.replace(/[\\?&]?(v|autoplay)=[^&#]*/g,"").replace(/^&/g,""):"";return"?autoplay=1"+a},openSharing(a){if(!this.config.disableSharing){var b=a.content[0].getElementsByClassName("tf_social_sharing")[0];b&&b.addEventListener("click",function(c){c.preventDefault();h.sharer(c.target.dataset.type,a.currItem.data.src.replace("?iframe=true",""),a.currItem.data.title)})}},updateHash(a,b){"open"===a?(null===this.origHash&&
(this.origHash=n.location.hash),a=b.currItem.data.title,b=m.createElement("div"),b.innerHTML=a,a=b.textContent.trim(),""!==a&&this._updateHash(a)):(this._updateHash(this.origHash),this.origHash=null)},_updateHash(a){"#"!==(""+a).charAt(0)&&(a="#"+a);history.replaceState("","",a)},openAnchor(){if(""!==n.location.hash){let a=decodeURI(n.location.hash.substring(1)),b=m.querySelector('[alt="'+a+'"]');b=null===b?m.querySelector('[title="'+a+'"]'):b;null!==b&&b.click()}},getIcon(a){a="tf-"+a.trim().replace(" ",
"-");const b=m.createElementNS("http://www.w3.org/2000/svg","use"),c=m.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("class","tf_fa "+a);b.setAttributeNS(null,"href","#"+a);c.appendChild(b);return c},getSocialMarkup(){if(this.config.disableSharing)return"";h.fontAwesome(["ti-facebook","ti-twitter-alt","ti-pinterest","ti-email"]);return'<div class="tf_social_sharing"><a href="#" data-type="facebook">'+this.getIcon("ti-facebook").outerHTML+'</a><a href="#" data-type="twitter">'+
this.getIcon("ti-twitter-alt").outerHTML+'</a><a href="#" data-type="pinterest">'+this.getIcon("ti-pinterest").outerHTML+'</a><a href="#" data-type="email">'+this.getIcon("ti-email").outerHTML+"</a></div>"},getTitle(a){const b=a.querySelector("img");let c=a.dataset.t;!c&&b&&(c=b.getAttribute("title")?b.getAttribute("title"):b.getAttribute("alt"));c||(c=a.getAttribute("title"));return c},getImageMarkup(a){return'<div class="mfp-figure"><div role="button" tabindex="0" class="tf_close mfp-close"></div><div class="mfp-counter"></div><div class="mfp-img"></div><div class="mfp-bottom-bar">'+
("no"!==a.dataset.title?'<div class="mfp-title"></div>':"")+this.getSocialMarkup()+"</div></div>"}};h.on("tf_gallery_init",function(a){r.init(a)})})(jQuery,Themify,document,window);
