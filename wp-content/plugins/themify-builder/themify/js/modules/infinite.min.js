(($,x,L,S)=>{'use strict';let j=null,l=null;const E=[],I=(t,e)=>{null===l&&(l=new IntersectionObserver((e,t)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&L.history.replaceState(null,null,e[t].target.dataset.tfHistory)},{rootMargin:'100% 0px -100% 0px'})),t.dataset.tfHistory=T(e),l.observe(t)},T=t=>x.updateQueryString('tf-scroll',null,t),w=t=>x.updateQueryString('tf-scroll',1,t),s=y=>{if(!0!==y.isWorking){y.isWorking=!0,y.status.classList.add('tf_scroll_request');let t,e='GET',l;if(y.filter){const a=y.filter.hasAttribute('data-sort'),i=y.filter.querySelector('.cat-item.active');if(i){if(y.ajax_loading=i,l={action:'themify_ajax_load_more',module:y.filter.dataset.el,id:y.filter.dataset.id,page:i.dataset.p},!i.classList.contains('cat-item-all')){const n=i.className.replace(/(current-cat)|(cat-item)|(-)|(active)/g,'').replace(' ','');l.tax=n.trim()}if(a){const s=y.filter.querySelector('.tf_ajax_sort_order.active'),o=y.filter.querySelector('.tf_ajax_sort_order_by .active');s&&(l.order=s.dataset.type),o&&(l.orderby=o.dataset.orderBy)}e='POST',t=themify_vars.ajax_url}}y.ajax_loading||(t=w(y.button.href)),x.fetch(l,'html',{method:e},t).then(t=>{const e=t.querySelector(y.id),l=T(y.button.href),a=y.container;let i=null;if(null!==e){var n=a,s=!!y.ajax_loading;if(x.lazyScroll(x.selectWithParent('[data-lazy]',n),!0),!s&&void 0!==L.Isotope){const g=L.Isotope.data(n);if(g){const h=n.previousElementSibling;if(null!==h&&h.classList.contains('post-filter')){const m=h.querySelector('.cat-item.active:not(.cat-item-all)');null!==m&&$(m).trigger('click.tf_isotop_filter')}}}x.triggerEvent(n,'infinitebeforeloaded',{d:t}).trigger('infinitebeforeloaded',[n,t]);const f=S.createDocumentFragment(),u=x.convert(e.children);if(!(i=null===(i=(i=e.tfClass('load-more-button')[0])||e.nextElementSibling)||(i=i.classList.contains('load-more-button')?i:i.children[0])&&i.classList.contains('load-more-button')?i:null)||'A'===i.tagName||(i=i.children[0])&&'A'===i.tagName||(i=null),void 0!==u[0]){for(let t=0,e=u.length;t<e;++t)f.appendChild(u[t]);a.appendChild(f),y.history&&I(u[0],l);{var o=u;var r=a;var c=y;const p=o.length,_=void 0!==L.Isotope?L.Isotope.data(r):null;null===j&&(j=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),o[0].className+=' tf_firstitem';var d=0;for(let t=0;t<p;++t)o[t].style.opacity=0,x.imagesLoad(o[t]).then(t=>{if(j){const e=t.querySelector('img[srcset]');null!==e&&(e.outerHTML=e.outerHTML)}if(++d,_&&_.appended(t),t.style.opacity='',d===p){if(_||r.classList.contains('auto_tiles')){if(!c.ajax_loading){const l=r.previousElementSibling;null!==l&&l.classList.contains('post-filter')&&x.trigger('themify_isotop_filter',[l])}r.classList.contains('auto_tiles')&&x.autoTiles(r)}for(let t=0;t<p;++t)x.lazyScroll(x.convert(x.selectWithParent('[data-lazy]',o[t])).reverse(),!0);if(x.triggerEvent(r,'infiniteloaded',{items:o}).trigger('infiniteloaded',[r,o]),'scroll'===c.scrollToNewOnLoad){let t=r.tfClass('tf_firstitem'),e=(t=t[t.length-1],$(t).offset().top);const a=800<=e?800+Math.abs(e/10):800,i=S.tfId('headerwrap');null!==i&&(i.classList.contains('fixed-header')||S.body.classList.contains('fixed-header'))&&(e-=$(i).outerHeight(!0)),(!1===c.scrollThreshold||e-S.docElement.scrollTop>c.scrollThreshold)&&x.scrollTo(e,a)}x.fonts(),x.wpEmbed(S.tfClass('wp-embedded-content')),x.largeImages()}})}}else i=null;y.ajax_loading&&null===i&&(y.ajax_loading.dataset.done=!0,y.filter.parentNode.classList.add('tb_hide_loadmore'))}if(y.ajax_loading)y.ajax_loading.dataset.p=parseInt(y.ajax_loading.dataset.p)+1,y.isWorking=null;else{if(null===i)y.button.remove(),y.button=null;else{const b=w(i.href);void 0!==y.prefetchBtn&&void 0===E[b]&&(E[b]=!0,y.prefetchBtn.setAttribute('href',b)),y.button.href=b,L.tfOn('scroll',t=>{y.isWorking=null},{passive:!0,once:!0})}if(void 0!==L.ga){const v=S.createElement('a');v.href=l,ga('set','page',v.pathname),ga('send','pageview')}y.history&&L.history.replaceState(null,null,l)}return y.status.classList.remove('tf_scroll_request'),e}).catch(t=>{console.warn('InfiniteScroll error.',t)})}};x.on('tf_infinite_init',(t,i)=>{let e=t.tfClass('load-more-button')[0];if(e=e||t.nextElementSibling){let l=e;if((e.classList.contains('load-more-button')||(e=e.children[0])&&e.classList.contains('load-more-button'))&&('A'===e.tagName||(e=e.children[0])&&'A'===e.tagName)&&(i.id||(i.id=t.id,i.id?i.id='#'+i.id:i.id='.'+t.className.split(' ').join('.'),i.id))){x.loadCss(x.url+'/css/modules/infinite','tf_infinite');const a=S.createElement('div');if(a.className='tf_load_status tf_loader tf_clear tf_hide',t.after(a),i.status=a,i.button=e,(i.container=t).classList.contains('tb_ajax_pagination')){const n=t.previousElementSibling;n&&n.classList.contains('post-filter')&&(i.filter=n)}!1!==i.scrollThreshold?L.tfOn('scroll',()=>{const t=S.createElement('link'),e=w(i.button.getAttribute('href'));var a;t.setAttribute('as','document'),t.rel='prefetch',t.href=e,i.button.after(t),i.prefetchBtn=t,E[e]=!0,I(i.container.children[0],L.location.href),a=i,new IntersectionObserver((e,l)=>{for(let t=e.length-1;-1<t;--t)!0===e[t].isIntersecting&&(null===a.button?l.disconnect():s(a))},{threshold:.1}).observe(l)},{passive:!0,once:!0}):(I(t.children[0],L.location.href),e.tfOn('click',t=>{t.preventDefault(),delete i.ajax_loading,s(i)}).style.display='inline-block')}}})})(jQuery,Themify,window,document);